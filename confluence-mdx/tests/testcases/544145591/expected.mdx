---
title: 'General'
---

import { Callout } from 'nextra/components'

# General

### Overview

General 페이지에서는 QueryPie 전체의 기본 설정을 변경할 수 있습니다.

<figure data-layout="center" data-align="center">
<img src="/544145591/output/image-20250822-103044.png" alt="Administrator &gt; General &gt; Company Management &gt; General" width="760" />
<figcaption>
Administrator &gt; General &gt; Company Management &gt; General
</figcaption>
</figure>

### 기본 설정

*  **Company Name**  : 프로필 영역 등에 표시할 회사 이름을 입력합니다.
*  **Web Base URL**  : QueryPie 서비스에 접근하기 위해 사용하는 기본 도메인 주소
*  **Timezone**  : QueryPie 전체에서 표시될 날짜 및 시각 정보에 적용될 타임존을 설정합니다.
*  **Date Format**  : 날짜 표기 방식을 지정합니다.
*  **Default Display Language**  : QueryPie의 기본 언어 설정을 설정합니다. (디폴트: 영어) 
*  **Audit Log Retention Period** : 감사로그 보존 주기를 설정합니다. 현재는 5년으로 고정되어 있습니다.
*  **Go to System Properties**  : 클릭 시 시스템 설정값 내역을 확인할 수 있습니다. 


### System Properties

System Properties 페이지에서는 QueryPie 시스템 컴포넌트들의 설정값을 확인하고, 파일로 저장할 수 있습니다.

<figure data-layout="center" data-align="center">
<img src="/544145591/output/image-20240805-014838.png" alt="Administrator &gt; General &gt; Company Management &gt; General &gt; System Properties" width="760" />
<figcaption>
Administrator &gt; General &gt; Company Management &gt; General &gt; System Properties
</figcaption>
</figure>


### Workflow Configuration

Workflow Configurations에서는 결재 상신 및 승인 관련 설정을 변경합니다.

<figure data-layout="center" data-align="center">
<img src="/544145591/output/Screenshot-2025-08-25-at-5.36.19-PM.png" alt="Screenshot-2025-08-25-at-5.36.19-PM.png" width="543" />
</figure>

### 최대 승인 기간 설정

모든 워크플로우 요청의 승인 만료일을 일괄적으로 제한하는 최대 기간을 설정합니다.

관리자는 Maximum Approval Duration 항목에서 승인 대기 요청이 자동으로 만료될 때까지의 기간을 1일에서 최대 14일까지 설정할 수 있습니다.
이곳에 설정된 기간은 사용자가 워크플로우를 상신할 때 선택하는 Approval Expiration Date (승인 만료일)의 최대값으로 적용됩니다.

* Admin &gt; Databases &gt; Configurations의 Maximum Access Duration 또는 Admin &gt; Servers &gt; Configurations의 Maximum Access Duration이 Maximum Approval Duration보다 짧게 설정된 경우, 권한이 이미 만료된 후에 승인이 처리되는 상황을 방지하기 위해 Approval Expiration Date은 더 짧은 Access Expiration Date (권한 만료일)을 따라갑니다. 

### 워크플로우 사유입력 글자 수 제한 설정

워크플로우의 요청 사유Reason for Request와 승인, 거부, 취소, 확인 시 입력하는 Comment의 최소 및 최대 글자 수를 설정하는 기능입니다.
이 설정을 통해 관리자는 조직의 정책에 맞춰 입력 글자 수를 관리할 수 있습니다.

* 관리자는 Workflow Configurations 페이지에서 다음 항목에 대한 글자 수 범위를 지정할 수 있습니다.
    * Reason for Request: 워크플로우 상신 시 사유 입력에 대한 최소, 최대 글자 수를 설정합니다. (기본값: 최소 3자, 최대 1000자)
    * Comments: 워크플로우 승인, 거부, 실행 취소, 리뷰 확인 시 입력값에 대한 최소, 최대 글자 수를 설정합니다. (기본값: 최소 3자, 최대 300자)
* 글자 수 범위는 최소 3자에서 최대 1000자 사이에서만 설정할 수 있습니다.

### 참조자 지정 활성화

Activate Review Step to collaborate with others 토글로 활성화합니다.

* Workflow 요청을 상신할 때 참조자를 지정하도록 허용할지 결정합니다.
* 토글을 켜면 요청 생성 화면의 결재 규칙 지정 영역에서 참조자 지정 버튼이 표시됩니다.
* 토글을 끄면 해당 버튼이 제거됩니다. (기존에 지정한 내역은 유지되며, 여전히 목록을 확인할 수 있습니다.)

### 사후 승인 허용

Allow users to submit requests in Urgent mode 토글로 활성화합니다.

* Workflow 요청을 상신할 때 사후 승인 모드(Urgent Mode)를 허용할지 결정합니다.
* 토글을 켜면 다음의 영역에서 사후 승인 관련 토글이 표시됩니다.
    * Approval Rules : 결재 규칙 생성 및 수정
    * Submit Request : 요청 생성 화면의 결재 규칙 지정 영역
* 토글을 끄면 위 영역에서 사후 승인 관련 토글이 더 이상 표시되지 않습니다. 단, 기존에 이미 사후 승인 모드로 요청한 내역은 그대로 남아 있으며, 실행 가능합니다.

### Attribute 기반 승인자 지정 기능

<Callout type="info">
11.4.0부터 속성 기반 승인자 지정시 여러개의 속성을 지정할 수 있도록 개선되었습니다.
* Admin &gt; General &gt; Company Management &gt; General &gt; Workflow Configurations의 Use User Attribute-Based Approval 옵션 스위치가 제거되었습니다.
* 기존 Attribute 기반 승인자 지정시 하나의 Attribute만 지정할 수 있었으나 다른 Attribute를 선택할 수 있도록 하여 각 승인 단계별 각각 다른 속성의 승인자가 매핑되도록 개선되었습니다. 
</Callout>

사용자 프로필의 특정 Attribute(예: 팀 리더, 부서장)를 기준으로 승인자를 자동으로 지정할 수 있습니다.

* 중요: 
    * 선택된 Attribute의 값으로는 승인자의 QueryPie Login ID가 입력되어 있어야 합니다.
      <figure data-layout="center" data-align="center">
      <img src="/544145591/output/Screenshot-2025-06-12-at-1.33.58-PM.png" alt="Admin &gt; General &gt; Users &gt; Detail page &gt; Profile 탭&lt;br/&gt;" width="712" />
      <figcaption>
      Admin &gt; General &gt; Users &gt; Detail page &gt; Profile 탭<br/>
      </figcaption>
      </figure>
* Administrator &gt; General &gt; Workflow Management &gt; Approval Rules 페이지에서 새로운 승인 규칙을 추가하거나 기존 규칙을 수정할 때, 'Assignee for Approval' 항목에 'Allow Assignee selection (Attribute-Based)'를 선택한 뒤 승인자와 매핑하기 위한 Attribute (예: teamLeader)를 지정합니다.<br/>
  <figure data-layout="center" data-align="center">
  <img src="/544145591/output/image-20251110-030113.png" alt="image-20251110-030113.png" width="736" />
  </figure>
    * 자가 승인 비활성화 시 연동: 만약 Approval Rules 설정에서 'Self Approval (자가 승인)' 옵션이 비활성화된 경우, Attribute 기반으로 결정된 승인자가 요청자 자신일 경우에는 해당 요청자를 승인자로 자동 지정할 수 없습니다. 이 경우, 워크플로우 설정 또는 시스템 정책에 따라 승인자 지정이 실패하거나 다른 경로로 처리될 수 있으니 주의가 필요합니다.
* Attribute 값 부재 시 알림
    * 만약 상신자 User Profile에 해당 Attribute 값이 비어 있는 경우(즉, 승인자의 Login ID가 지정되지 않은 경우), 워크플로우 상신 시 다음과 같은 내용의 알림 모달이 표시되며 요청 제출이 중단됩니다. 상신자는 관리자에게 문의하여 프로필의 Attribute 값을 설정해야 합니다.
        * 에러 메시지 예시: 
          <figure data-layout="center" data-align="center">
          <img src="/544145591/output/image-20250508-022114.png" alt="image-20250508-022114.png" width="688" />
          </figure>
* Attribute 값은 있지만 해당 사용자가 비활성화된 경우
    * 만약 상신자 User Profile에 해당 Attribute 값으로 지정된 승인자가 비활성화된 경우, 워크플로우 상신 시 Approver란에 지정된 승인자가 표기되지 않으며 아래와 같은 내용의 알림 모달이 표시되며 요청 제출이 중단됩니다.
        * 에러 메세지 예시:
          <figure data-layout="center" data-align="center">
          <img src="/544145591/output/Screenshot-2025-06-16-at-10.30.14-AM.png" alt="Screenshot-2025-06-16-at-10.30.14-AM.png" width="615" />
          </figure>

### Attribute 기반 워크플로우 메뉴 숨김 기능 (Use User Attribute to Hide Workflow Menu)

Use User Attribute to Hide Workflow Menu 토글을 활성화합니다.

<figure data-layout="center" data-align="center">
<img src="/544145591/output/Screenshot-2025-06-26-at-6.35.32-PM.png" alt="Screenshot-2025-06-26-at-6.35.32-PM.png" width="670" />
</figure>

특정 사용자 속성(User Attribute)을 기준으로 사용자 대시보드에서 Workflow 메뉴를 보이지 않도록 설정하는 기능입니다.

* 토글을 활성화하면 `User Attribute`의 `Key`와 `Value`를 한 쌍으로 선택하고 입력할 수 있습니다.
* 여기에 설정된 `Key:Value` 조건과 일치하는 사용자는 사용자 대시보드에 `Workflow` 메뉴가 표시되지 않습니다.
*  **예시:**  `User Attribute Key`로 '부서코드'를 선택하고, `Value`로 '부서 A'를 입력하면 해당 부서코드 소속의 사용자에게는 `Workflow` 메뉴가 보이지 않습니다.

### 대리결재 기능 활성화 / 비활성화 옵션 (Allow Delegated Approval)

<Callout type="info">
대리결재 기능 활성화 / 비활성화 옵션은 11.3.0에 추가되었습니다.<br/>11.4.0 부터 사용자의 대리결재자 지정 / 해제 이벤트에 대해 감사로그를 기록합니다.
해당 로그는 External API ( /api/external/v2/workflows/approval-delegations/logs) 를 사용해서 조회 할 수 있습니다.
</Callout>

승인자 역할을 일정기간 다른 사용자에게 위임하는 기능인 대리결재 기능을 관리자가 활성화 또는 비활성화 할 수 있는 옵션입니다.
만약 비활성화 할 경우 사용자 preference 화면에서 Approver setting 메뉴가 노출되지 않습니다.

<figure data-layout="center" data-align="center">
<img src="/544145591/output/image-20250926-112444.png" alt="Allow Delegated Approval 스위치" width="253" />
<figcaption>
Allow Delegated Approval 스위치
</figcaption>
</figure>

<figure data-layout="center" data-align="center">
<img src="/544145591/output/image-20250926-112201.png" alt="대리결재 기능을 비활성화한 상태의 preference" width="516" />
<figcaption>
대리결재 기능을 비활성화한 상태의 preference
</figcaption>
</figure>

### SQL 요청 실행 시 쓰로틀링 활성화 (Use throttling when submitting SQL Request in Workflow)

토글을 켜면 Workflow에서 상신된 SQL 요청 실행시 쓰로틀링을 적용합니다.

<figure data-layout="center" data-align="center">
<img src="/544145591/output/Screenshot-2025-05-09-at-3.18.32-PM.png" alt="Screenshot-2025-05-09-at-3.18.32-PM.png" width="604" />
</figure>


이 옵션을 활성화하는 경우, 명시된 갯수만큼 쿼리를 연속적으로 실행한 뒤, 명시된 간격(ms)만큼 대기합니다.
이를 통해 대용량 쿼리 실행에 따르는 DB 부하를 방지할 수 있습니다.

*  **Query chunk size**  : 1~999,999 사이의 값으로 설정되며, 다수의 쿼리를 해당 개수만큼 나누어 순차적으로 실행하는 기능
    * 예) 100개의 쿼리가 있을 때, Query chunk size가 10으로 설정되어 있다면 한번에 10개의 Query를 실행합니다. 
*  **Query throttle interval** : 연속 쿼리 실행 후, 다음 연속 쿼리 실행 간의 간격 (1 ~ 9,999 ms)

### Ledger 테이블 DML 워크플로우 커스텀 URL 리디렉션 기능

Redirect to custom page for SQL Requests 토글을 활성화합니다.

<figure data-layout="center" data-align="center">
<img src="/544145591/output/Screenshot-2025-05-09-at-8.33.07-PM.png" alt="Screenshot-2025-05-09-at-8.33.07-PM.png" width="516" />
</figure>

이 옵션을 통해 User Agent에서 Ledger 테이블 대상으로 INSERT, UPDATE, DELETE 쿼리 실행으로 인해 워크플로 승인 요청이 발생할 경우, `Send Request` 버튼 클릭 시 사용자를 사전에 정의된 커스텀 URL 페이지로 리디렉션할지 여부를 결정합니다.
이를 통해 고객사는 자체 운영 중인 외부 워크플로 시스템과의 연동을 강화할 수 있습니다.

* 토글을 활성화한 경우
    * Administrator &gt; General &gt; Workflow Configurations 페이지에 커스텀 URL을 입력할 수 있는 필드가 나타납니다.
    * User Agent 사용자가 Ledger 테이블에 대해 변경 쿼리를 실행하고 승인 요청을 보낼 경우, `Send Request` 클릭 시 해당 커스텀 URL로 리디렉션되며, 이때 쿼리나 사용자 정보는 전달되지 않습니다.
* 토글을 비활성화한 경우
    * Administrator &gt; General &gt; Workflow Configurations 페이지에 커스텀 URL을 입력할 수 있는 필드가 표시되지 않습니다.
    * User Agent 사용자가 Ledger 테이블에 대해 INSERT, UPDATE, DELETE 쿼리를 실행하여 워크플로 승인 요청 모달이 표시될 때, `Send Request` 버튼을 클릭하면 기존과 같이 QueryPie 내부의 표준 워크플로 페이지로 이동합니다

### 워크플로우 Request 타입별 사용자 노출 제어 기능

Select Request Types Allowed for Users 토글을 활성화합니다.

<figure data-layout="center" data-align="center">
<img src="/544145591/output/Screenshot-2025-05-09-at-8.40.28-PM.png" alt="Screenshot-2025-05-09-at-8.40.28-PM.png" width="352" />
</figure>

이 옵션을 통해 관리자가 사용자가 접근하고 요청할 수 있는 워크플로우의 요청(Request) 타입을 선택적으로 제어할 수 있도록 합니다.

* 토글을 활성화(On)한 경우:
    * Administrator &gt; General &gt; Workflow Configurations 페이지에서:
        * Select Request Types Allowed for Users 토글 아래에 제품별(Databases (DAC), Servers (SAC), Kubernetes (KAC), Web Apps (WAC))로 분류된 요청 타입 목록이 체크박스 형태로 표시됩니다.
        * 관리자는 이 체크박스를 사용하여 사용자에게 노출할 요청 타입을 선택적으로 지정할 수 있습니다. 기본적으로 모든 요청 타입이 선택된 상태로 표시됩니다.
    * 사용자 워크플로우 상신 화면:
        * 관리자가 선택한(체크한) 요청 타입만 사용자에게 표시되며 요청 가능합니다.
    * Access Role Request의 특별 동작:
        * Servers (SAC), Kubernetes (KAC), Web Apps (WAC) 중 하나 이상의 제품에서 Access Role Request가 선택되어야 사용자에게 Access Role Request 항목이 노출됩니다.
        * Access Role Request 요청 시, 내부 Service 항목에는 관리자가 선택한 제품(예: "Server Access Control")만 표시됩니다.
* 토글을 비활성화(Off)한 경우 (기본값):
    * Administrator &gt; General &gt; Workflow Configurations 페이지에서:
        * 요청 타입 선택을 위한 체크박스 목록이 표시되지 않습니다.
    * 사용자 워크플로우 상신 화면:
        * 기존과 동일하게, 사용자에게 할당된 라이선스에 따라 모든 관련 제품의 워크플로우 요청 타입이 노출되고 요청 가능합니다.
        * Access Role Request 내의 Service 항목도 라이선스에 따라 모두 노출됩니다.

### DB access 요청 권한 별 결재선 지정 기능

Workflow를 통해 DB Access Request 를 상신할 경우 요청하는 권한에 따라 결재선 (Approval Rule)을 특정할 수 있도록 하려면 “Use DB Privilege Type Based Approval” 토글을 활성화합니다.

<figure data-layout="center" data-align="center">
<img src="/544145591/output/image-20250822-111454.png" alt="Use DB Privilege Type Based Approval" width="507" />
<figcaption>
Use DB Privilege Type Based Approval
</figcaption>
</figure>

`+Routing Rule` 버튼을 누르면 privilege 에 대한 조건을 지정하여 결재선에 대한 라우팅을 지정할 수 있습니다.

<figure data-layout="center" data-align="center">
<img src="/544145591/output/image-20250822-112026.png" alt="image-20250822-112026.png" width="432" />
</figure>

*  **Routing Rule Name**  : 식별하기 쉬운 라우팅 규칙의 이름을 입력합니다.
*  **Condition**  : Privilege에 대한 조건을 지정합니다.
    *  **All Match**  : 사용자가 DB Access Request 를 상신할 때 지정한 Privilege Type이 모두 같은 종류인 경우 동작하는 조건입니다.
    *  **Contains** : 사용자가 DB Access Request 를 상신할 때 지정한 Privilege Type이 하나라도 지정한 종류를 포함 했을 때 동작하는 조건입니다.
*   **Requested Privilege Type**  : Administrator &gt; Databases &gt; DB Access Control &gt; Privilege Type에 정의 되어 있는 Privilege 유형 중 하나를 선택합니다.
*  **Approval Rule**  : 위 조건이 만족했을 경우 강제할 결재선(Approval Rule)을 지정합니다.

#### Routing Rule 지정 예시

* 만약 사용자가 Workflow의 DB Access Request를 통해 요청한 대상 커넥션에 지정한 privilege가 모두 “Read-Only” 인 경우 특정 Approval rule을 사용하도록 강제하기 원한다면, 아래와 같이 설정하고 `Add` 버튼을 누릅니다.
    * Condition: All Match 선택.
    * Requested Privilege Type : Read-Only 선택.
    * Approval Rule : 강제하기 원하는 Approval Rule 선택. 
* 만약 사용자가 Workflow의 DB Access Request를 통해 요청한 대상 커넥션에 지정한 privilege가 하나라도 Read/Write가 포함되어 있는 경우 특정 Approval rule을 사용하도록 강제하기 원한다면, 아래와 같이 설정하고 `Add` 버튼을 누릅니다.
    * Condition: Contains 선택.
    * Requested Privilege Type : Read/Write 선택.
    * Approval Rule : 강제하기 원하는 Approval Rule 선택.

### SQL Request에서 실행계획 첨부기능 활성 / 비활성 옵션

Workflow의 SQL Request를 통해 수행할 쿼리를 상신할 때 실행 계획 결과를 첨부하는 “Attach Explain Results” 기능을 활성 또는 비활성화 할 수 있도록 옵션을 제공합니다.

<figure data-layout="center" data-align="center">
<img src="/544145591/output/image-20250825-002423.png" alt="image-20250825-002423.png" width="425" />
</figure>

관리자가 이 옵션을 활성화 하더라도 Workflow의 SQL Request 양식에서 “Attach Explain Results” 는 Off로 되어 있으므로 사용자가 필요시 명시적으로 “Attatch Explain Results” 토글 스위치를 On으로 변경해야 실행계획 결과가 첨부됩니다.
