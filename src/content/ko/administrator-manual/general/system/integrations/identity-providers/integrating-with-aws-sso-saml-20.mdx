---
title: 'AWS SSO 연동하기 (SAML 2.0)'
---

import { Callout } from 'nextra/components'

# AWS SSO 연동하기 (SAML 2.0)

### Overview

QueryPie에서는 AWS IAM Identity Center의 사용자를 여러 클라우드 애플리케이션 및 SAML 2.0을 통해 사용자 연동을 지원합니다.
사용자를 동기화하여 접근 권한을 부여하고 정책을 적용할 수 있습니다.

<Callout type="important">
QueryPie의 Identity Providers Integration 설정에서 SAML을 Type으로 선택하여 설정하면 스케줄에 의한 주기적인 동기화는 지원하지 않습니다.
</Callout>

### AWS IAM Identity Center에서 QueryPie를 애플리케이션으로 추가

<figure data-layout="center" data-align="center">
<img src="/administrator-manual/general/system/integrations/identity-providers/integrating-with-aws-sso-saml-20/AWS-SSO-01-20230317-044219.png" alt="AWS-SSO-01-20230317-044219.png" width="760" />
</figure>

1. [AWS IAM Identity Center](https://ap-northeast-2.console.aws.amazon.com/singlesignon/applications/home)에 접속합니다.
2. 좌측 메뉴의 애플리케이션 메뉴로 진입합니다.
3. 우측 상단의 애플리케이션 추가 버튼을 클릭합니다.
4. 사용자 지정 SAML 2.0 애플리케이션 추가 옵션 선택 후 다음 버튼을 클릭합니다.
5. 애플리케이션 구성 &gt; 표시 이름에 QueryPie를 입력합니다.
6. 애플리케이션 속성 &gt; 애플리케이션 시작 URL 항목에 QueryPie가 설치된 도메인 주소를 아래와 같이 입력합니다.
    1. 애플리케이션 Start URL : https://`{querypie_host}`
7. 애플리케이션 메타 데이터 항목에 각각 다음과 같이 입력합니다. 
    1. 애플리케이션 ACS URL : https://`{querypie_host}`/saml/sp/acs
    2. 애플리케이션 SAML 대상 : https://`{querypie_host}`/saml/sp/metadata
8. 제출 버튼을 클릭하여 저장합니다.


### QueryPie 연동을 위한 속성 매핑 설정

<figure data-layout="center" data-align="center">
<img src="/administrator-manual/general/system/integrations/identity-providers/integrating-with-aws-sso-saml-20/AWS-SSO-06-20230317-064023.png" alt="AWS-SSO-06-20230317-064023.png" width="760" />
</figure>

1. 생성된 애플리케이션 우측 상단에서 작업 &gt; 속성 매핑 편집 으로 이동합니다.
2. 애플리케이션 내 사용자 속상과 매핑 값, 형식을 위 스크린샷을 참고하여 다음과 같이 입력합니다.

|  **애플리케이션 내 사용자 속성**  |  **IAM Identity Center 의 문자열 값 또는 사용자 속성으로 매핑**  |  **형식**      |
| --------------------- | ------------------------------------------------ | ------------ |
| Subject               | $`{user:email}`                                  | emailAddress |
| firstName             | $`{user:givenName}`                              | basic        |
| lastName              | $`{user:familyName}`                             | basic        |
| loginId               | $`{user:email}`                                  | basic        |
| email                 | $`{user:email}`                                  | basic        |

`변경 사항 저장` 버튼을 클릭하여 저장합니다.

### QueryPie 에서 AWS IAM Identity Center 연동 설정

<figure data-layout="center" data-align="center">
<img src="/administrator-manual/general/system/integrations/identity-providers/integrating-with-aws-sso-saml-20/image-20240723-072112.png" alt="Administrator &gt; General &gt; User Management &gt; Authentication " width="739" />
<figcaption>
Administrator &gt; General &gt; User Management &gt; Authentication 
</figcaption>
</figure>

* Administrator &gt; Admin &gt; General &gt; System &gt; Integration 에서 Athentication 섹션의 하위에서 Identity Provider를 선택합니다.
* Add 버튼을 눌러 SAML 형식으로 IdP를 등록합니다.
    *  **Name**  : 식별에 용이하도록 적합한 IdP의 이름을 입력합니다.
    *  **Type** : SAML 을 선택합니다.
    *  **Identity Provider Metadata**  : AWS에서 애플리케이션 &gt; 작업 &gt; 구성 편집 화면에서 IAM Identity Center SAML 메타데이터 파일을 다운로드한 SML metadata XML의 내용을 복사해서 붙여 넣습니다.
* `Save` 버튼을 클릭하여 저장합니다.

### QueryPie에서 SAML 로그인

<figure data-layout="center" data-align="center">
<img src="/administrator-manual/general/system/integrations/identity-providers/integrating-with-aws-sso-saml-20/image-20251020-044838.png" alt="image-20251020-044838.png" width="760" />
</figure>

로그인 페이지에서 `Login with SAML` 버튼을 통해 AWS 인증하여 QueryPie에 로그인 합니다.


