---
title: 'Audit'
---

import { Callout } from 'nextra/components'

# Audit

### Overview

QueryPie 안에서 일어나는 모든 활동은 감사 로그에 기록됩니다.
사용자와 관리자의 로그인/로그아웃, 권한 부여와 회수, DB, 서버 및 쿠버네티스에 대한 접근, 쿼리 또는 명령어 수행, 리소스 또는 보안 설정 변경 등 QueryPie와 접근제어 대상 리소스에서 발생하는 모든 활동 이력이 로깅 대상입니다.


### 제공 기능

*  **감사 로그 추출**  :  **Audit Log Export**  메뉴에서 감사 로그를 파일 형태로 추출하여 저장할 수 있습니다. 
*  **보고서 출력**  :  **Report**  메뉴에서 QueryPie의 데이터 현황을 보고서 형태로 출력할 수 있습니다.
*  **감사 로그 조회**  : Audit 메뉴 하위의 **개별 로그 페이지** 에서 로그의 실시간 조회, 검색 및 필터링이 가능합니다.


### 조회 가능한 감사 로그 종류

1. 개별 로그 페이지 내 목록에서 실시간으로 저장되는 로그를 확인할 수 있습니다. (최신 순으로 정렬)
2. 특정 컬럼의 값으로 로그를 검색하거나 필터링할 수 있습니다. 
3. 목록에서 특정 로그를 클릭하면 Drawer에서 상세 정보를 확인할 수 있습니다.

조회 가능한 감사 로그의 종류는 보유하고 계신 라이선스에 따라 구성이 달라지며, 라이선스별 제공되는 로그의 종류는 아래와 같습니다.

<table data-table-width="760" data-layout="default" local-id="2eeba34f-b909-48ea-a011-5381931efcd4">
<tbody>
<tr local-id="84b3c86c-ab6d-43e6-844e-ee8e8565386e">
<th local-id="4b5bfae2-bcbd-452a-82cf-2e340a8f9298">
**공통 로그**
</th>
<th local-id="56489574-e0c9-4e34-8829-6c68d3520e81">
**DAC 전용 로그**
</th>
<th local-id="ebd3ff56-3b1b-42a9-bb8d-2e63484de5dd">
**SAC 전용 로그**
</th>
<th local-id="e54d7e73-a09b-4000-9c43-b18546a06c24">
**KAC 전용 로그**
</th>
</tr>
<tr local-id="6069ea89-296f-43b1-8bf5-55dff52c0918">
<td local-id="e27a7b6c-2d4e-49a9-b73d-51d7e79e6631">
**General**
* User Access History
* Activity Logs
* Admin Role History
* Workflow Logs
* Reverse Tunnels
</td>
<td local-id="310ff96c-a206-4b06-81f4-24e823656e97">
**Databases**
* DB Access History
* Query Audit
* Running Queries
* DML Snapshot
* Account Lock History
* Access Control Logs
</td>
<td local-id="1656db56-c136-4d6b-90c6-4f7b57ae184e">
**Servers**
* Server Access History
* Command Audit
* Session Logs
* Session Monitoring
* Access Control Logs
* Server Role History
* Account Lock History
</td>
<td local-id="8c0cace7-ea51-4f70-a2f5-69cd5117ce5c">
**Kubernetes**
* Request Audit
* Pod Session Recordings
* Kubernetes Role History
</td>
</tr>
</tbody>
</table>

**1. General**

* User Access History : 사용자 로그인, 로그아웃 이력
* Activity Logs : 관리자가 수행하는 리소스 등록 및 설정 변경 이력 
* Admin Role History : 관리자 권한 부여, 변경, 회수 이력
* Workflow Logs : 워크플로우 타입별 작업의 상태 변경(요청, 승인, 거절 등) 이력
* Reverse Tunnels : 현재 연결 중인 리버스 터널링 세션 전체 모니터링 (Reverse Tunnel Agent 모니터링)


**2. Databases**

* DB Access History : 커넥션 연결 및 연결해제 이력
* Query Audit : 실행이 끝난 쿼리 수행 이력
* Running Queries : 현재 실행 중인 쿼리 
* DML Snapshot : INSERT / UPDATE / DELETE 쿼리 실행 완료시 전후 데이터 기록 (기록 위해 별도 설정 필요)
* Account Lock History : 패스워드 실패 및 장기미접속으로 인한 커넥션 잠금 이력
* Access Control Logs : 커넥션 접근 권한 부여 및 회수 이력


**3. Servers**

* Server Access History : 서버 연결 및 연결해제 이력
* Command Audit : 실행이 끝난 명령어 수행 이력 
* Session Logs : 개별 세션 이력 및 세션 리플레이 기능 제공 
* Session Monitoring : 현재 연결 중인 세션 전체 모니터링 (필요 시 관리자가 세션 강제 종료 가능) 
* Access Control Logs : Direct Permission 및 Workflow 를 통한 서버 접근 권한 부여 및 회수 이력
* Server Role History : Role 메뉴를 통한 서버 접근 권한 부여 및 회수 이력
* Account Lock History : 서버 접속 계정 잠금 이력 

<Callout type="info">
11.5.0 부터 Audit 하위 메뉴 항목인 Session Monitoring 은 Servers &gt; Monitoring &gt; Session Monitoring으로 이동되었습니다.
</Callout>


**4. Kubernetes**

* Request Audit : 쿠버네티스 API 서버 호출 내역
* Pod Session Recordings : Pod Exec 등의 연결 세션 내 행위 녹화 내역
* Kubernetes Role History : 쿠버네티스 접근 권한 부여 및 회수 이력


