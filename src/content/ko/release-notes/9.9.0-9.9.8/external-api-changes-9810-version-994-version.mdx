---
title: 'External API 변경사항 (9.8.10 버전 > 9.9.4 버전)'
---

# External API 변경사항 (9.8.10 버전 > 9.9.4 버전)

______

## API Docs JSON file

:paperclip: [9810_external.json](9810_external.json)
:paperclip: [994_external.json](994_external.json)


______

## 1. Authentication

* API Key HTTP Header name이 변경되었습니다

|                             |  **변경 전**            |  **변경 후**     |
| --------------------------- | -------------------- | ------------- |
|  **Header Parameter name**  | X-QueryPie-Api-Token | Authorization |


______

## 2. Alert API

#### 변경/개선 사항

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**API(9.8.10)**
</th>
<th>
**변경점**
</th>
</tr>
<tr>
<th>
**(GET) List**
</th>
<td>
* 각 Alert의  **모든 정보** 를 반환 <br/>→ 각 Alert의  **간단한 정보** 를 반환하도록 변경되었습니다.
* 각 Alert Type 별로 Alert의 자세한 정보를 반환하는  **Detail API 추가** 되었습니다.
</td>
</tr>
<tr>
<th>
**(POST) Create**
</th>
<td>
*  **하나의 API** 로 모든 Type의 Alert를 생성 가능 <br/>→ 각 Alert Type 별로  **생성 API가 분리** 하였습니다.
* 기존 Create API 삭제되었습니다.
</td>
</tr>
<tr>
<th>
**(PUT) Update**
</th>
<td>
*  **하나의 API** 로 모든 Type의 Alert를 수정 가능 <br/>→ 각 Alert Type 별로  **수정 API을 분리** 하였습니다.
* 기존 Update API 삭제되었습니다.
</td>
</tr>
<tr>
<th>
**(Delete) Delete**
</th>
<td>
* 변경점 없음.
</td>
</tr>
</tbody>
</table>

#### [신규](POST) Create, (PUT) Update, (GET) Detail API

* 자세한 요청 내용은 Docs 참조

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**Alert Type(9.8.10 기준)**
</th>
<th>
**Docs 위치(9.9.4)**
</th>
</tr>
<tr>
<td>
`SQL_EXECUTION`
</td>
<td>
[SQL Execution]<br/>`/api/external/alerts/sql-execution`
</td>
</tr>
<tr>
<td>
`SQL_EXECUTION_PREVENTED`
</td>
<td>
[Prevented SQL Execution]<br/>`/api/external/alerts/prevented-sql-execution`
</td>
</tr>
<tr>
<td>
`DATABASE_AUTHENTICATION_FAILED`
</td>
<td>
[DB Connection Attempt]<br/>`/api/external/alerts/db-connection-attempt`
</td>
</tr>
<tr>
<td>
`SENSITIVE_DATA_BY_POLICY`
</td>
<td>
[Sensitive Data Access]<br/>`api/external/alerts/sensitive-data-access`
* policy
</td>
</tr>
<tr>
<td>
`SENSITIVE_DATA_BY_LEVEL`
</td>
<td>
[Sensitive Data Access]<br/>`api/external/alerts/sensitive-data-access`
* level
</td>
</tr>
<tr>
<td>
`EXCEL_EXPORT`
</td>
<td>
[Data Export]<br/>`api/external/alerts/data-export`
</td>
</tr>
<tr>
<td>
`APPROVAL_REQUESTED`
</td>
<td>
[Workflow New Request]<br/>`/api/external/alerts/workflow-new-request`
</td>
</tr>
<tr>
<td>

</td>
<td>
[Unusual Login Attempt] 새로 추가됨<br/>`/api/external/alerts/unusual-login-attempt`
</td>
</tr>
</tbody>
</table>

#### (GET) List

`/api/external/notifications`

##### Request

* 변경점 없음

##### Response

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**변경 전**
</th>
<th>
**변경 후**
</th>
</tr>
<tr>
<td>
```json
{
  "list": [
    {
      "condition": {...},
      "description": "",
      "lastAt": "2019-08-24T14:15:22Z",
      "lastStatus": "UNDEFINED",
      "notification": {...},
      "policy": {...},
      "template": "{{userName}} executed {{expRows}} rows.",
      "uuid": "a5ac2279-b715-4819-a00d-daba81739057"
    },
    ...
  ],
  "page": {...}
}
```
</td>
<td>
```json
{
  "list": [
    {
      "alertType": "SQL Execution",
      "lastAt": "2019-08-24T14:15:22Z",
      "lastStatus": "UNDEFINED",
      "name": "string",
      "template": "{{userName}} executed {{expRows}} rows.",
      "uuid": "a5ac2279-b715-4819-a00d-daba81739057"
    },
    ...
  ],
  "page": {...}
}
```
</td>
</tr>
</tbody>
</table>



______

## 3. Approval Rule API

#### (GET) List

`/api/external/approval-rules`

##### Request

* Query Parameter
*  **RequestType**  이 `SQL`, `ACCESS` → `SQL`, `EXPORT`, `ACCESS` 로 `EXPORT` **가 추가** 되었습니다.

##### Response

* 변경점 없음



______

## 4. Audit Log API

#### (GET) List of Approval

`/api/external/audit-logs`

##### Request

* Query Parameter

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**변경 전**
</th>
<th>
**변경 후**
</th>
</tr>
<tr>
<td>
* pageNumber
* pageSize
* actionType
* clusterGroupId
* clusterId
* startDate
* endDate
* databaseType
* sqlFullText
</td>
<td>
*  **cursor** 
*  **count** 
* actionType
* clusterGroupId
* clusterId
* startDate
* endDate
*  **databaseType** 
* sqlFullText
</td>
</tr>
</tbody>
</table>

* cursor 는 Response 의  **nextCursor** 를  **그대로**  쓰면 됩니다. 첫 호출이라면 비워놓습니다.
    * /api/docs 에 나와있는 내용은  **잘못된 내용** 으로 이후 버전에서 수정 예정입니다.
*  **count** 는 기존 pageSize 와 동일하며,  **max**  값은  **100** 입니다.
*  **databaseType**  에 `Redis` 가  **추가** 되었습니다.

##### Response

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**변경 전**
</th>
<th>
**변경 후**
</th>
</tr>
<tr>
<td>
```json
{
  "list": [
    {
      …
      "execMillis": 200,
      "execResult": false,
      "executedAt": "2019-08-24T14:15:22Z",
      …
    }
  ],
  "page": {
    "currentPage": 0,
    "pageSize": 0,
    "totalElements": 0,
    "totalPages": 0
  }
}
```

</td>
<td>
```json
{
  "hasNext": true,
  "list": [
    {
      …
      "execMillis": 200,
      "execResult": false, (Deprecated)
      "executedAt": "2019-08-24T14:15:22Z",
      …
    }
  ],
  "nextCursor": "2019-08-24T16:15:22Z"
}
```
</td>
</tr>
</tbody>
</table>

* hasNext 필드가  **추가** 되었습니다.  **Response 이후 다음 데이터가 있는지** 를 나타냅니다.
*  **execResult** 가 **Deprecated**  되었습니다. 이후 버전에서 삭제됩니다.
*  **page**  필드가  **사라지고**   **nextCursor**  가  **추가** 되었습니다.
    * Request 의 startDate 와 endDate 사이에서 현재 Response 의 list 중  **가장 마지막 요소의 executedAt**  을 의미합니다.
    * Request 의 cursor 에 해당 값을 넣으면  **해당 시간부터 이어서**  데이터를 가져옵니다. (startDate, endDate 는 변경하지 않아도 됩니다.)
    * /api/docs 에 나와있는 내용은  **잘못된 내용** 으로 이후 버전에서 수정 예정입니다.

#### <br/>(GET) Detail

`/api/external/audit-logs/{id}`

##### Request

* 변경점 없음

##### Response

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**변경 전**
</th>
<th>
**변경 후**
</th>
</tr>
<tr>
<td>
```json
{
      …
      "execMillis": 200,
      "execResult": false,
      "executedAt": "2019-08-24T14:15:22Z",
      …
}
```

</td>
<td>
```json
{
      …
      "execMillis": 200,
      "execResult": false, (Deprecated)
      "executedAt": "2019-08-24T14:15:22Z",
      …
}
```
</td>
</tr>
</tbody>
</table>

*  **execResult** 가 **Deprecated**  되었습니다. 이후 버전에서 삭제됩니다.


#### (GET) Detail

`/api/external/audit-logs/{uuid}`

##### Request

* 변경점 없음

##### Response

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**변경 전**
</th>
<th>
**변경 후**
</th>
</tr>
<tr>
<td>
```json
{
      …
      "execMillis": 200,
      "execResult": false,
      "executedAt": "2019-08-24T14:15:22Z",
      …
}
```

</td>
<td>
```json
{
      …
      "execMillis": 200,
      "execResult": false, (Deprecated)
      "executedAt": "2019-08-24T14:15:22Z",
      …
}
```

</td>
</tr>
</tbody>
</table>

*  **execResult** 가 **Deprecated**  되었습니다. 이후 버전에서 삭제됩니다.



______

## 5. Authentication History API

#### (GET) List of Authentication

`/api/external/connection-auth-logs`

##### Request

* Query Parameter

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**변경 전**
</th>
<th>
**변경 후**
</th>
</tr>
<tr>
<td>
* pageNumber
* pageSize
* actionType
* clusterGroupId
* clusterId
* startDate
* endDate
* databaseType
* sqlFullText
</td>
<td>
* pageNumber
* pageSize
*  **actionType** 
* clusterGroupId
* clusterId
* startDate
* endDate
*  **databaseType** 
* sqlFullText
</td>
</tr>
</tbody>
</table>

*  **actionType**  에서 `LOGIN`, `LOGOUT`, `LOCKED`, `EXPIRED`, `LOCKED_MANUALLY`, `UNLOCK` 이  **제거** 되었습니다.
    *  `CONNECT`, `DISCONNECT` 만 사용합니다.
*  **databaseType**  에 `Redis`가  **추가** 되었습니다.

##### Response

* 변경점 없음



______

## 6. User Access History API

#### (GET) List of User Access History

`/api/external/system-auth-logs`

##### Request & Response

*  **actionType**  에서 `CONNECT`, `DISCONNECT`이  **제거** 되었습니다.
    *  `LOGIN`, `LOGOUT`, `LOCKED`, `EXPIRED`, `LOCKED_MANUALLY`, `UNLOCK` 만 사용합니다.



______

## 7. Cloud Provider API

#### (GET) List of Cloud Provider

`/api/external/cloud-providers`

##### Request

* 변경점 없음

##### Response

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**변경 전**
</th>
<th>
**변경 후**
</th>
</tr>
<tr>
<td>
```json
{
  "list": [
    {
      …
      "subscriptionId": "string",
      "targetArn": "string",
      …
    }
  ],
  "page": {
    …
  }
}
```
</td>
<td>
```json
{
  "list": [
    {
      …
      "subscriptionId": "string",
      "synchronizableDatabaseTypes": [],
      "targetArn": "string",
      …
    }
  ],
  "page": {
     …
  }
}
```
</td>
</tr>
</tbody>
</table>

*  **synchronizableDatabaseTypes**  가  **추가** 되었습니다.
    *  **싱크하고자 하는 데이터베이스의 타입**  (벤더) 를 출력 필드입니다.
    * `AURORA_MY_SQL`, `AURORA_POSTGRESQL`, `MY_SQL`, `POSTGRESQL`, `MARIA_DB`, `ORACLE`, `SQL_SERVER`, `DYNAMO_DB`, `DOCUMENT_DB`, `REDSHIFT`, `ATHENA`


#### (POST) Create Cloud Provider

`/api/external/cloud-providers`

##### Request

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**변경 전**
</th>
<th>
**변경 후**
</th>
</tr>
<tr>
<td>
```json
{
      …
      "subscriptionId": "string",
      "targetArn": "string",
      …
}
```

</td>
<td>
```json
{
      …
      "subscriptionId": "string",
      "synchronizableDatabaseTypes": [],
      "targetArn": "string",
      …
}
```
</td>
</tr>
</tbody>
</table>

*  **synchronizableDatabaseTypes**  가  **추가** 되었습니다.
    *  **싱크하고자 하는 데이터베이스의 타입**  (벤더) 를 입력하는 필드입니다.
    * `AURORA_MY_SQL`, `AURORA_POSTGRESQL`, `MY_SQL`, `POSTGRESQL`, `MARIA_DB`, `ORACLE`, `SQL_SERVER`, `DYNAMO_DB`, `DOCUMENT_DB`, `REDSHIFT`, `ATHENA`

##### Response

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**변경 전**
</th>
<th>
**변경 후**
</th>
</tr>
<tr>
<td>
```json
{
      …
      "subscriptionId": "string",
      "targetArn": "string",
      …
 }
```
</td>
<td>
```json
{
      …
      "subscriptionId": "string",
      "synchronizableDatabaseTypes": [],
      "targetArn": "string",
      …
}
```

</td>
</tr>
</tbody>
</table>

*  **synchronizableDatabaseTypes**  가  **추가** 되었습니다.
    *  **싱크하고자 하는 데이터베이스의 타입**  (벤더) 를 출력하는 필드입니다.
    * `AURORA_MY_SQL`, `AURORA_POSTGRESQL`, `MY_SQL`, `POSTGRESQL`, `MARIA_DB`, `ORACLE`, `SQL_SERVER`, `DYNAMO_DB`, `DOCUMENT_DB`, `REDSHIFT`, `ATHENA`<br/>

#### (PUT) Update Cloud Provider

`/api/external/cloud-providers/{cloudProviderUuid}`

##### Request

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**변경 전**
</th>
<th>
**변경 후**
</th>
</tr>
<tr>
<td>
```json
{
  "cronExpression": "0 0 6 * * ?",
  "name": "AWS",
  "proxyAuthType": "QUERYPIE",
  "proxyEnabled": true,
  "replicationMode": "MANUAL"
}
```

</td>
<td>
```json
{
  "cronExpression": "0 0 6 * * ?",
  "name": "AWS",
  "proxyAuthType": "QUERYPIE",
  "proxyEnabled": true,
  "replicationMode": "MANUAL",
  "synchronizableDatabaseTypes": [
    "AURORA_MY_SQL"
  ]
}
```

</td>
</tr>
</tbody>
</table>

*  **synchronizableDatabaseTypes**  가  **추가** 되었습니다.
    *  **싱크하고자 하는 데이터베이스의 타입**  (벤더) 를 입력하는 필드입니다.
    * `AURORA_MY_SQL`, `AURORA_POSTGRESQL`, `MY_SQL`, `POSTGRESQL`, `MARIA_DB`, `ORACLE`, `SQL_SERVER`, `DYNAMO_DB`, `DOCUMENT_DB`, `REDSHIFT`, `ATHENA`

##### Response

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**변경 전**
</th>
<th>
**변경 후**
</th>
</tr>
<tr>
<td>
```json
{
      …
      "subscriptionId": "string",
      "targetArn": "string",
      …
}
```

</td>
<td>
```json
{
      …
      "subscriptionId": "string",
      "synchronizableDatabaseTypes": [],
      "targetArn": "string",
      …
}
```
</td>
</tr>
</tbody>
</table>

*  **synchronizableDatabaseTypes**  가  **추가** 되었습니다.
    *  **싱크하고자 하는 데이타베이스의 타입**  (벤더) 를 출력하는 필드입니다.
    * `AURORA_MY_SQL`, `AURORA_POSTGRESQL`, `MY_SQL`, `POSTGRESQL`, `MARIA_DB`, `ORACLE`, `SQL_SERVER`, `DYNAMO_DB`, `DOCUMENT_DB`, `REDSHIFT`, `ATHENA`



______

## 8. Cluster Role API

#### (GET) List of Role

`/api/external/roles`

##### Request

* 변경점 없음

##### Response

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**변경 전**
</th>
<th>
**변경 후**
</th>
</tr>
<tr>
<td>
```json
{
  "list": [
    {
      …
      "privilegeTypes": "SELECT",
      …
    },
    …
  ],
  "page": { … }
}
```
</td>
<td>
```
{
  "list": [
    {
      …
      "privilegeTypes": "SELECT",
      "privilegeVendor": "SQL",
      …
    },
    …
  ],
  "page": { … }
}
```
</td>
</tr>
</tbody>
</table>

*  **privilegeVendor** 가  **추가** 되었습니다.
    * `SQL`, `REDIS`

#### (POST) Create Role

`/api/external/roles`

##### Request & Response

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**변경 전**
</th>
<th>
**변경 후**
</th>
</tr>
<tr>
<td>
```json
{
  …
  "privilegeTypes": "ALL",
  …
}
```
</td>
<td>
```json
{
  …
  "privilegeTypes": "ALL",
  "privilegeVendor": "SQL",
  …
}
```
</td>
</tr>
</tbody>
</table>

*  **privilegeVendor** 가  **추가** 되었습니다.
    * `SQL`, `REDIS`

#### (PUT) Update Role

`/api/external/roles/{roleUuid}`

##### Request & Response

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**변경 전**
</th>
<th>
**변경 후**
</th>
</tr>
<tr>
<td>
```json
{
  …
  "privilegeTypes": "ALL",
  …
}
```
</td>
<td>
```json
{
  …
  "privilegeTypes": "ALL",
  "privilegeVendor": "SQL",
  …
}
```
</td>
</tr>
</tbody>
</table>

*  **privilegeVendor** 가  **추가** 되었습니다.
    * `SQL`, `REDIS`



______

## 9. Connection API

#### (GET) List of Cluster Group

`/api/external/connections`

##### Request

* 변경점 없음

##### Response

<table>
<colgroup>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>

</th>
<th>
**변경 전**
</th>
<th>
**변경 후**
</th>
</tr>
<tr>
<th>
**Request**
</th>
<td>
<p>-</p>
</td>
<td>
없음
</td>
</tr>
<tr>
<th>
**Response**
</th>
<td>
```json
{
  "list": [
    {
      …
      "clusters": [
          …
      ],
      "connectionOwners": [
       …
      ],
      "databaseType": "MySQL",
      "databaseVersion": "5.7.10",
      "dbUserInfos": [
        {
          "dbUserType": "string",
          "dbUsername": "string"
        }
      ],
      "deleted": false,
      …
      "schemaName": "test_db",
      "useMultipleAccount": true,
      "useProxy": true,
      …
    }
  ],
  "page": {
    …
  }
}
```

</td>
<td>
```json
{
  "list": [
    {
      …
      "clusters": [
        …
      ],
      "connectionAccount": {
        "kerberosProtocols": {
          "admin": {
            "principal": "string",
            "realm": "string",
            "serviceName": "string"
          },
          "common": {
            "principal": "string",
            "realm": "string",
            "serviceName": "string"
          }
        },
        "type": "UIDPWD",
        "useMultipleAccount": false,
        "usernamePasswords": {
          "admin": {
            "username": "string"
          },
          "common": {
            "username": "string"
          },
          "proxy": {
            "username": "string"
          }
        }
      },
      "connectionOwners": [
        …
      ],
      "databaseType": "MySQL",
      "databaseVersion": "5.7.10",
      "deleted": false,
      …
      "schemaName": "test_db",
      "useProxy": true,
      …
    }
  ],
  "page": {
    …
  }
}
```

</td>
</tr>
</tbody>
</table>

*  **dbUserInfo**  가  **삭제** 되었습니다.  **userMultipleAccount**  가  **삭제** 되었습니다.
    * 해당 필드의 내용은 connectionAccount 을 통해 전달됩니다.<br/>
*  **connectionAccount** 가  **추가** 되었습니다.
    * 커넥션의  **account**   **정보** 를 전달하는 필드입니다.
    *  **type** 은 account 의  **타입** 을 의미합니다.
        * `NOAUTH` `SASL_KERBEROS` `SASL_PLAIN_UID` `UIDPWD` `SASL_PLAIN_UIDPWD_SSL` `NOAUTH_SSL` `DELEGATION_TOKEN` `O_AUTH_CLIENT_CREDENTIALS`
    *  **useMultipleAccount**  는  **멀티 어카운트** 를 사용하는지에 대한  **boolean**  값입니다.
    *  **KerberosProtocols**  는  **커버로스 어카운트**  정보를 전달하는 필드입니다.
        * 커버로스 어카운트는  **proxy**   **어카운트** 를  **지원하지 않습니다.** 
    *  **usernamePasswords**  는  **usernamePassword**   **어카운트**  정보를 전달하는 필드입니다.


#### (POST) Create Cluster Group

`/api/external/connections`

##### Request

<table>
<colgroup>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>

</th>
<th>
**변경 전**
</th>
<th>
**변경 후**
</th>
</tr>
<tr>
<th>
**Request**
</th>
<td>
<p>-</p>
</td>
<td>
없음
</td>
</tr>
<tr>
<th>
**Response**
</th>
<td>
```json
{
      "clusters": [
          …
      ],
      "connectionOwners": [
       …
      ],
      "databaseType": "MySQL",
      "databaseVersion": "5.7.10",
      "dbUserInfos": [
        {
          "dbUserType": "string",
          "dbUsername": "string"
        }
      ],
      "deleted": false,
      …
}
```

</td>
<td>
```json
{
      …
      "clusters": [
        …
      ],
      "connectionAccount": {
        "kerberosProtocols": {
          "admin": {
            "principal": "string",
            "realm": "string",
            "serviceName": "string"
          },
          "common": {
            "principal": "string",
            "realm": "string",
            "serviceName": "string"
          }
        },
        "type": "UIDPWD",
        "useMultipleAccount": false,
        "usernamePasswords": {
          "admin": {
            "username": "string"
          },
          "common": {
            "username": "string"
          },
          "proxy": {
            "username": "string"
          }
        }
      },
      "connectionOwners": [
        …
      ],
      "databaseType": "MySQL",
      "databaseVersion": "5.7.10",
      "deleted": false,
      …
}
```

</td>
</tr>
</tbody>
</table>

*  **dbUserInfo**  가  **삭제** 되었습니다.  **userMultipleAccount**  가  **삭제** 되었습니다. 
    * 해당 필드의 내용은 connectionAccount 을 통해 전달됩니다.<br/>
*  **connectionAccount** 가  **추가** 되었습니다.
    * 커넥션의  **account**   **정보** 를 전달하는 필드입니다.
    *  **type** 은 account 의  **타입** 을 의미합니다.
        * `NOAUTH` `SASL_KERBEROS` `SASL_PLAIN_UID` `UIDPWD` `SASL_PLAIN_UIDPWD_SSL` `NOAUTH_SSL` `DELEGATION_TOKEN` `O_AUTH_CLIENT_CREDENTIALS`
    *  **useMultipleAccount**  는  **멀티 어카운트** 를 사용하는지에 대한  **boolean**  값입니다.
    *  **KerberosProtocols**  는  **커버로스 어카운트**  정보를 전달하는 필드입니다.
        * 커버로스 어카운트는  **proxy**   **어카운트** 를  **지원하지 않습니다.** 
    *  **usernamePasswords**  는  **usernamePassword**   **어카운트**  정보를 전달하는 필드입니다.

##### Response

<table>
<colgroup>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>

</th>
<th>
**변경 전**
</th>
<th>
**변경 후**
</th>
</tr>
<tr>
<th>
**Request**
</th>
<td>
<p>-</p>
</td>
<td>
없음
</td>
</tr>
<tr>
<th>
**Response**
</th>
<td>
```json
{
      …
      "clusters": [
          …
      ],
      "connectionOwners": [
       …
      ],
      "databaseType": "MySQL",
      "databaseVersion": "5.7.10",
      "dbUserInfos": [
        {
          "dbUserType": "string",
          "dbUsername": "string"
        }
      ],
      "deleted": false,
      …
      "schemaName": "test_db",
      "useMultipleAccount": true,
      "useProxy": true,
      …
}
```

</td>
<td>
```json
{
      …
      "clusters": [
        …
      ],
      "connectionAccount": {
        "kerberosProtocols": {
          "admin": {
            "principal": "string",
            "realm": "string",
            "serviceName": "string"
          },
          "common": {
            "principal": "string",
            "realm": "string",
            "serviceName": "string"
          }
        },
        "type": "UIDPWD",
        "useMultipleAccount": false,
        "usernamePasswords": {
          "admin": {
            "username": "string"
          },
          "common": {
            "username": "string"
          },
          "proxy": {
            "username": "string"
          }
        }
      },
      "connectionOwners": [
        …
      ],
      "databaseType": "MySQL",
      "databaseVersion": "5.7.10",
      "deleted": false,
      …
      "schemaName": "test_db",
      "useProxy": true,
      …
}
```

</td>
</tr>
</tbody>
</table>

*  **dbUserInfo**  가  **삭제** 되었습니다.  **userMultipleAccount**  가  **삭제** 되었습니다. 
    * 해당 필드의 내용은 connectionAccount 을 통해 전달됩니다.<br/>
*  **connectionAccount** 가  **추가** 되었습니다.
    * 커넥션의  **account**   **정보** 를 전달하는 필드입니다.
    *  **type** 은 account 의  **타입** 을 의미합니다.
        * `NOAUTH` `SASL_KERBEROS` `SASL_PLAIN_UID` `UIDPWD` `SASL_PLAIN_UIDPWD_SSL` `NOAUTH_SSL` `DELEGATION_TOKEN` `O_AUTH_CLIENT_CREDENTIALS`
    *  **useMultipleAccount**  는  **멀티 어카운트** 를 사용하는지에 대한  **boolean**  값입니다.
    *  **KerberosProtocols**  는  **커버로스 어카운트**  정보를 전달하는 필드입니다.
        * 커버로스 어카운트는  **proxy**   **어카운트** 를  **지원하지 않습니다.** 
    *  **usernamePasswords**  는  **usernamePassword**   **어카운트**  정보를 전달하는 필드입니다.

#### <br/>(PATCH) Update Cluster Group

`/api/external/connections/{uuid}`

##### Request

<table>
<colgroup>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>

</th>
<th>
**변경 전**
</th>
<th>
**변경 후**
</th>
</tr>
<tr>
<th>
**Request**
</th>
<td>
<p>-</p>
</td>
<td>
없음
</td>
</tr>
<tr>
<th>
**Response**
</th>
<td>
```json
{
      "clusters": [
          …
      ],
      "connectionOwners": [
       …
      ],
      "databaseType": "MySQL",
      "databaseVersion": "5.7.10",
      "dbUserInfos": [
        {
          "dbUserType": "string",
          "dbUsername": "string"
        }
      ],
      "deleted": false,
      …
}
```

</td>
<td>
```json
{
      …
      "clusters": [
        …
      ],
      "connectionAccount": {
        "kerberosProtocols": {
          "admin": {
            "principal": "string",
            "realm": "string",
            "serviceName": "string"
          },
          "common": {
            "principal": "string",
            "realm": "string",
            "serviceName": "string"
          }
        },
        "type": "UIDPWD",
        "useMultipleAccount": false,
        "usernamePasswords": {
          "admin": {
            "username": "string"
          },
          "common": {
            "username": "string"
          },
          "proxy": {
            "username": "string"
          }
        }
      },
      "connectionOwners": [
        …
      ],
      "databaseType": "MySQL",
      "databaseVersion": "5.7.10",
      "deleted": false,
      …
}
```
</td>
</tr>
</tbody>
</table>

*  **dbUserInfo**  가  **삭제** 되었습니다.  **userMultipleAccount**  가  **삭제** 되었습니다. 
    * 해당 필드의 내용은 connectionAccount 을 통해 전달됩니다.<br/>
*  **connectionAccount** 가  **추가** 되었습니다.
    * 커넥션의  **account**   **정보** 를 전달하는 필드입니다.
    *  **type** 은 account 의  **타입** 을 의미합니다.
        * `NOAUTH` `SASL_KERBEROS` `SASL_PLAIN_UID` `UIDPWD` `SASL_PLAIN_UIDPWD_SSL` `NOAUTH_SSL` `DELEGATION_TOKEN` `O_AUTH_CLIENT_CREDENTIALS`
    *  **useMultipleAccount**  는  **멀티 어카운트** 를 사용하는지에 대한  **boolean**  값입니다.
    *  **KerberosProtocols**  는  **커버로스 어카운트**  정보를 전달하는 필드입니다.
        * 커버로스 어카운트는  **proxy**   **어카운트** 를  **지원하지 않습니다.** 
    *  **usernamePasswords**  는  **usernamePassword**   **어카운트**  정보를 전달하는 필드입니다.

##### Response

<table>
<colgroup>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>

</th>
<th>
**변경 전**
</th>
<th>
**변경 후**
</th>
</tr>
<tr>
<th>
**Request**
</th>
<td>
<p>-</p>
</td>
<td>
없음
</td>
</tr>
<tr>
<th>
**Response**
</th>
<td>
```json
{
      …
      "clusters": [
          …
      ],
      "connectionOwners": [
       …
      ],
      "databaseType": "MySQL",
      "databaseVersion": "5.7.10",
      "dbUserInfos": [
        {
          "dbUserType": "string",
          "dbUsername": "string"
        }
      ],
      "deleted": false,
      …
      "schemaName": "test_db",
      "useMultipleAccount": true,
      "useProxy": true,
      …
}
```

</td>
<td>
```json
{
      …
      "clusters": [
        …
      ],
      "connectionAccount": {
        "kerberosProtocols": {
          "admin": {
            "principal": "string",
            "realm": "string",
            "serviceName": "string"
          },
          "common": {
            "principal": "string",
            "realm": "string",
            "serviceName": "string"
          }
        },
        "type": "UIDPWD",
        "useMultipleAccount": false,
        "usernamePasswords": {
          "admin": {
            "username": "string"
          },
          "common": {
            "username": "string"
          },
          "proxy": {
            "username": "string"
          }
        }
      },
      "connectionOwners": [
        …
      ],
      "databaseType": "MySQL",
      "databaseVersion": "5.7.10",
      "deleted": false,
      …
      "schemaName": "test_db",
      "useProxy": true,
      …
}
```

</td>
</tr>
</tbody>
</table>

*  **dbUserInfo**  가  **삭제** 되었습니다.  **userMultipleAccount**  가  **삭제** 되었습니다. 
    * 해당 필드의 내용은 connectionAccount 을 통해 전달됩니다.<br/>
*  **connectionAccount** 가  **추가** 되었습니다.
    * 커넥션의  **account**   **정보** 를 전달하는 필드입니다.
    *  **type** 은 account 의  **타입** 을 의미합니다.
        * `NOAUTH` `SASL_KERBEROS` `SASL_PLAIN_UID` `UIDPWD` `SASL_PLAIN_UIDPWD_SSL` `NOAUTH_SSL` `DELEGATION_TOKEN` `O_AUTH_CLIENT_CREDENTIALS`
    *  **useMultipleAccount**  는  **멀티 어카운트** 를 사용하는지에 대한  **boolean**  값입니다.
    *  **KerberosProtocols**  는  **커버로스 어카운트**  정보를 전달하는 필드입니다.
        * 커버로스 어카운트는  **proxy**   **어카운트** 를  **지원하지 않습니다.** 
    *  **usernamePasswords**  는  **usernamePassword**   **어카운트**  정보를 전달하는 필드입니다.



______

## 10. Notification Channels API

#### (GET) List of Notification channel

`/api/external/notification-channels`

##### Request

* Query Parameter 필드추가

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**변경 전**
</th>
<th>
**변경 후**
</th>
</tr>
<tr>
<td>
* …
</td>
<td>
* dataFlowRequest. **filterKey** 
* dataFlowRequest. **filterValue** 
* dataFlowRequest. **sortKey** 
* dataFlowRequest. **sortType** 
* …
</td>
</tr>
</tbody>
</table>

* dataflowRequest. **filterKey** 는  **필터 키** 를 넣습니다.. ex) “Title”
* dataflowRequest. **filterValue**  는  **필터 값 (검색어)** 를 넣습니다. ex) “channelName123”
* dataflowRequest. **sortKey**  는  **sort**  할  **칼럼 명** 을 넣습니다. ex ) “createdAt”
* dataflowRequest. **sortType**  은  **sort**  를  **내림차순** 으로 할지,  **오름차순** 으로 할지를 입력합니다. ex) “ASC”, “DESC”




