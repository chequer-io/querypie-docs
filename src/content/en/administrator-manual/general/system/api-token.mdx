---
title: 'API Token'
confluenceUrl: 'https://querypie.atlassian.net/wiki/spaces/QM/pages/544377652/API+Token'
---

import { Callout } from 'nextra/components'

# API Token

### Overview

This is a page for managing External API tokens.


### What is External API?

External API is an API that allows you to use QueryPie's features outside of the web console. Currently in version 10.0, it provides two versions: V0.9 and V2.

*  **QueryPie API V2** 
    * QueryPie version 9.16.1 and later supports V2 API.
    * The call path is `{querypie url}/api/external/v2/` and can be used without affecting the existing API V0.9.
* The basic headers required for API calls are as follows. Please refer to the API documentation for detailed API specifications.

|  **Key**      |  **Value**             |
| ------------- | ---------------------- |
| Content-Type  | application/json       |
| Authorization | `{querypie api token}` |

Precautions when using API tokens are as follows.

* API tokens can be issued by users with Owner privileges or administrators with access to the corresponding menu.
* Tokens are fully exposed only upon initial issuance. After that, all except the first 8 characters are masked and displayed.
    *  **If the token key is lost** , we recommend deleting the existing key from the history and issuing a new token to use.
* When extending API tokens, the expiration date is extended by the period set when the token was created from the time the Update button is pressed.

<Callout type="info">
The list of provided APIs and specifications can be found in the API documentation accessible by clicking `API Docs` in the top right corner of Administrator &gt; General &gt; System &gt; API Token.
</Callout>


### Viewing API Token List

<figure data-layout="center" data-align="center">
<img src="/administrator-manual/general/system/api-token/screenshot-20240723-110619.png" alt="Administrator &gt; General &gt; System &gt; API Token" width="760" />
<figcaption>
Administrator &gt; General &gt; System &gt; API Token
</figcaption>
</figure>

1. Navigate to Administrator &gt; General &gt; System &gt; API Token menu.
2. You can view the list of currently created tokens. (Sorted by creation date, newest first)
3.  **Search and Filter** :
    1. Token lists can be searched by Token Name or Token Value.
    2. Lists can be filtered by token status.


### Creating API Tokens

<figure data-layout="center" data-align="center">
<img src="/administrator-manual/general/system/api-token/image-20241028-094955.png" alt="Administrator &gt; General &gt; System &gt; API Token &gt; Create API Token" width="760" />
<figcaption>
Administrator &gt; General &gt; System &gt; API Token &gt; Create API Token
</figcaption>
</figure>

1. `Create API Token` Click the button in the top right corner of the API Token page.
2. Enter the following information for token creation.
    1.  **API Name**  : Enter an identifiable name for the API token.
    2.  **Validity Period Type** : Specify the expiration period for the token.
        1. When Never Expire is selected, the token can be used permanently, but this is not recommended.
    3.  **Scopes : Select permissions that can be performed with the API token.** 
        1. Full Access : Permission to perform all administrator functions.
        2. Select Role : Select desired Admin Role to limit permission scope.
            * Admin Role can be saved without any input, and in this case, no operations can be performed with the API Token.
    4.  **Allowed Zones**  : Define IP ranges where API token usage is possible.
        * Set API call IP ACL by mapping Allowed Zones defined in Admin &gt; General &gt; Company Management &gt; Allowed Zones.
    5.  **Description**  : Write a description for the API token.
3. `Ok` Click the button to complete API Token creation.
4. You can view API Token information only once in the creation completion modal.
  <figure data-layout="center" data-align="center">
  <img src="/administrator-manual/general/system/api-token/screenshot-20240723-120533.png" alt="General Settings &gt; System &gt; API Token &gt; Create API Token" width="736" />
  <figcaption>
  General Settings &gt; System &gt; API Token &gt; Create API Token
  </figcaption>
  </figure>
    1. Click the copy button on the right side of the API Token to copy Token information.
    2. `OK` Click the button to close the modal.


### Modifying API Tokens

<figure data-layout="center" data-align="center">
<img src="/administrator-manual/general/system/api-token/image-20241028-095455.png" alt="General Settings &gt; System &gt; API Token &gt; Edit API Token" width="760" />
<figcaption>
General Settings &gt; System &gt; API Token &gt; Edit API Token
</figcaption>
</figure>

1. Click on the token you want to modify in the Token list within the API Token page.
2. The Edit API Token modal is displayed. Changeable items are as follows.
    1.  **API Name** : Enter if you want to change the name.
    2.  **Validity Period Type** : You can change the API Token expiration date.
        1. When saving after changes, the expiration date changes based on the newly specified period from the current time.
        2. Whether the remaining period until API Token expiration is shorter or longer than the newly specified expiration date, the expiration date is overwritten with the newly specified value. You can extend or shorten API lifespan depending on the situation.
        3. When changing to Never Expire, the expiration date/time is removed, but this is not recommended.
    3.  **Scopes**  : Change the permission scope that can be performed with the API Token.
        1. Full Access : Permission to perform all administrator functions.
        2. Select Role : Select desired Admin Role to limit permission scope.
            * Admin Role can be saved without any input, and in this case, no operations can be performed with the API Token.
    4.  **Allowed Zones**  : Define IP ranges where API token usage is possible.
        * Set API call IP ACL by mapping Allowed Zones defined in Admin &gt; General &gt; Company Management &gt; Allowed Zones.
    5.  **Description**  : Enter if you want to change the description for the API token.
3. `OK` Click the button to save the changes.


### Renewing API Token Usage Period

1. Click the `Update` button of the token you want to renew in the token list within the API Token page.
2. When renewal is successful, a toast is displayed, and the expiration date is extended by the period set in  **Validity Period Type**  when the token was created from the time the button was clicked.


### Deleting API Tokens

<figure data-layout="center" data-align="center">
<img src="/administrator-manual/general/system/api-token/screenshot-20240723-121212.png" alt="Administrator &gt; General &gt; System &gt; API Token &gt; Delete" width="760" />
<figcaption>
Administrator &gt; General &gt; System &gt; API Token &gt; Delete
</figcaption>
</figure>

1. Select the token you want to delete with a checkbox in the API Token page.
2. `Delete` Click the button in the table header.
3. Click the `OK` button when the confirmation modal is displayed.
4. Confirm the deletion of the corresponding token in the table list.