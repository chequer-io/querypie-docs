---
title: 'Channels'
confluenceUrl: 'https://querypie.atlassian.net/wiki/spaces/QM/pages/544243925/Channels'
---

import { Callout } from 'nextra/components'

# Channels

### Overview

The Channels page allows you to register and manage channels to receive notifications sent by QueryPie.
Currently, QueryPie provides four channel types: Slack, Agit, HTTP, and Email, and preliminary work for integration is required before channel registration.

### Viewing Registered Channels

You can view the list of currently registered channels in the Administrator &gt; General &gt; Company Management &gt; Channels page.
You can search by channel name and filter by Channel Type.

<figure data-layout="center" data-align="center">
<img src="/administrator-manual/general/company-management/channels/screenshot-20240808-172741.png" alt="Administrator &gt; General &gt; Company Management &gt; Channels" width="760" />
<figcaption>
Administrator &gt; General &gt; Company Management &gt; Channels
</figcaption>
</figure>

Clicking on items in the list allows you to view and modify detailed information.

<figure data-layout="center" data-align="center">
<img src="/administrator-manual/general/company-management/channels/screenshot-20241211-191603.png" alt="Administrator &gt; General &gt; Company Management &gt; Channels &gt; List Details" width="760" />
<figcaption>
Administrator &gt; General &gt; Company Management &gt; Channels &gt; List Details
</figcaption>
</figure>


### Registering Channels

`Create Channel` Click the button in the top right corner of the Channels page to display the channel creation modal.

<figure data-layout="center" data-align="center">
<img src="/administrator-manual/general/company-management/channels/screenshot-20241211-154231.png" alt="Administrator &gt; General &gt; Company Management &gt; Channels &gt; Create Channel" width="760" />
<figcaption>
Administrator &gt; General &gt; Company Management &gt; Channels &gt; Create Channel
</figcaption>
</figure>

*  **Title**  : Channel name
*  **Channel Type**  : Select the channel type to receive notifications. Additional input fields below vary depending on the selection.
    * Slack : Send notifications to Slack channel
    * Agit : Send notifications to Agit
    * HTTP : Direct request to HTTP API such as Zapier, Okta Workflows
    * Email : Send notifications via email

#### When Channel Type is set to `Slack`

The input content for channel creation is as follows.

<Callout type="info">
For detailed Slack App setup methods, refer to the  **Slack App Setup Method for Slack Integration**  section at the bottom of this document.
</Callout>

*  **Message Sending Method**  : Message sending method
    * API : Send messages using Slack API
        * When API is selected, assignee mentions are possible in New Request Alerts. (After version 10.2.2)
        * Bot User OAuth Token : Bot User OAuth Token of the Slack App to send messages
        * Channel ID : Slack Channel ID where the Slack App to send messages is invited
    * Webhook : Send messages via webhook
        * Request URL (required) : URL to send requests to
            * Must copy and paste Webhook URL information after setting up Webhook in Slack App

#### When Channel Type is set to `Agit`

The input content for channel creation is as follows.

*  **Request URL**  (required) : URL to send requests to
*  **Agit Channel**  : Enter the name to display for the Agit channel

#### When Channel Type is set to `HTTP`

The input content for channel creation is as follows.

*  **Request URL**  (required) : URL to send requests to
*  **Request Header (JSON)**  : Enter request headers for calls if needed (JSON format)
*  **Body Template**  : Request body template
    * Default value : `{{message}}`
    * Enter content to add commonly before and after messages defined in Alert

#### When Channel Type is set to `Email`

<Callout type="important">
**Caution**

Email type channels can only be created when an SMTP server for email sending is registered in QueryPie.

Go to Admin &gt; General &gt; System &gt; Integration menu and click the Email tile to check related settings.
</Callout>

The input content when creating a channel is as follows.

*  **Email Recipients**  (required) : Email recipients
    * You can select users registered in QueryPie, and emails will be sent to registered email addresses
*  **Body Template**  : Request body template
    * Default value : `{{message}}` 
    * Enter content to add commonly before and after messages defined in Alert

### Deleting Channels

Select the channel you want to delete with a checkbox in the channel list within the Channels page, and the `Delete` button will appear.
Click the button to display a deletion confirmation modal. `OK` Click the button to complete the deletion.

<figure data-layout="center" data-align="center">
<img src="/administrator-manual/general/company-management/channels/screenshot-20240728-222004.png" alt="Administrator &gt; General &gt; Company Management &gt; Channels &gt; Delete confirmation modal" width="760" />
<figcaption>
Administrator &gt; General &gt; Company Management &gt; Channels &gt; Delete confirmation modal
</figcaption>
</figure>

### Slack App Setup Method for Slack Integration

#### 1. Creating an App

<figure data-layout="center" data-align="center">
<img src="/administrator-manual/general/company-management/channels/screenshot-20240305-161015.png" alt="Slack API &gt; Apps &gt; Create an App" width="769" />
<figcaption>
Slack API &gt; Apps &gt; Create an App
</figcaption>
</figure>

1. Go to [https://api.slack.com/apps](https://api.slack.com/apps).
2. `Create an App` Click the button.
3. Select the App Name and Slack Workspace to send notifications to in the above screen.
4. Click `Create App`.

#### 2-1. Integrating with Webhook Type

<figure data-layout="center" data-align="center">
<img src="/administrator-manual/general/company-management/channels/screenshot-20240804-190716.png" alt="Slack API &gt; Apps &gt; Settings &gt; Incoming Webhooks" width="760" />
<figcaption>
Slack API &gt; Apps &gt; Settings &gt; Incoming Webhooks
</figcaption>
</figure>

1. Navigate to the `Incoming Webhooks` menu within the app page.
2. Enable the Activate Incoming Webhooks option.
3. Click `Add New Webhook to Workspace` at the bottom.

<figure data-layout="center" data-align="center">
<img src="/administrator-manual/general/company-management/channels/image-20240305-110658.png" alt="Webhook addition screen in Slack" width="760" />
<figcaption>
Webhook addition screen in Slack
</figcaption>
</figure>

1. Select the channel to send alerts to within the Workspace and click the `Allow` button.
2. Copy the generated Webhook URL information and paste it into the QueryPie channel creation modal.

#### 2-2. Integrating with API Type

1. Click the created App to enter the app's Settings page, then navigate to the `App Manifest` menu.
2. Add `chat:write`, `users:read`, `users:read.email` to the scopes area and save. <br/>  
  <figure data-layout="center" data-align="center">
  <img src="/administrator-manual/general/company-management/channels/screenshot-20241211-171140.png" alt="Slack API &gt; Apps &gt; Settings &gt; App Manifest" width="736" />
  <figcaption>
  Slack API &gt; Apps &gt; Settings &gt; App Manifest
  </figcaption>
  </figure>
3. Restart the app through `Reinstall your app` via the yellow notification bar at the top. (Required)
4. `Reinstall to {Workspace_name}` Click the button to select the Slack channel to send notifications to, then click the `Allow` button.
    1. To apply after changing scopes, you must perform this step again.
5. Go to the corresponding Slack channel and add the created app. (If the app is already added, you can skip this step)
6. Click the channel name to open the Channel Detail modal, and copy the Channel ID from the bottom of the modal. Paste the copied Channel ID into the QueryPie channel creation modal. <br/>  
  <figure data-layout="center" data-align="center">
  <img src="/administrator-manual/general/company-management/channels/screenshot-20241211-190312.png" alt="Slack App &gt; Channel Detail" width="736" />
  <figcaption>
  Slack App &gt; Channel Detail
  </figcaption>
  </figure>
7. Copy the Bot User OAuth Token from the OAuth & Permissions page and paste it into the QueryPie channel creation modal. 
  <figure data-layout="center" data-align="center">
  <img src="/administrator-manual/general/company-management/channels/screenshot-20240804-190835.png" alt="Slack OAuth & Permissions page - Copy token" width="760" />
  <figcaption>
  Slack OAuth & Permissions page - Copy token
  </figcaption>
  </figure>