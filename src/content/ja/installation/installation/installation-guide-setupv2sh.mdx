---
title: 'ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰ - setup.v2.sh'
confluenceUrl: 'https://querypie.atlassian.net/wiki/spaces/QM/pages/1177321474/-+setup.v2.sh'
---

import { Callout } from 'nextra/components'

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰ - setup.v2.sh


## ç´¹ä»‹

ã“ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰ã¯1ã¤ã®ã‚µãƒ¼ãƒã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã«QueryPieã‚µãƒ¼ãƒã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ç°¡å˜ãªæ§‹æˆã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã‚’æ¡ˆå†…ã—ã¾ã™ã€‚
ç°¡å˜ãªæ§‹æˆã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‚‚ã€å¤§éƒ¨åˆ†ã®ã‚¯ã‚¨ãƒªãƒ‘ã‚¤æ©Ÿèƒ½ã‚’è©¦ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã®ã‚¬ã‚¤ãƒ‰ã§æ¡ˆå†…ã™ã‚‹setup.v2.shã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯æ—¢å­˜ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«éç¨‹ã‚’è‡ªå‹•çš„ã«å®Ÿè¡Œã—ã¾ã™ã€‚
è‡ªå‹•åŒ–ã•ã‚ŒãŸã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«éç¨‹ã¯æ—¢å­˜ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«éç¨‹ã¨ä¸»è¦éƒ¨åˆ†ãŒåŒä¸€ã§ã™ã€‚
æ—¢å­˜ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«éç¨‹ã¯ã“ã®æ–‡æ›¸ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š[ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰ - ç°¡å˜ãªæ§‹æˆ](installation-guide-simple-configuration)

ã“ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹å¼ã¯å®Ÿéš›ã®é‹ç”¨ç’°å¢ƒã§ä½¿ç”¨ã™ã‚‹ã«ã¯é©ã—ã¦ã„ã¾ã›ã‚“ã€‚
å®Ÿéš›ã®é‹ç”¨ç’°å¢ƒã§ä½¿ç”¨ã™ã‚‹ã®ã«é©ã—ãŸã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã¯åˆ¥é€”æä¾›ã•ã‚Œã‚‹[QueryPie Installation Guide]ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

<Callout type="info">
QueryPie 10.3.0ä»¥é™ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å¯¾è±¡ã¨ã™ã‚‹PoCç”¨é€”ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰ã§ã™ã€‚
</Callout>

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å‰ã®æº–å‚™äº‹é …

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’é€²è¡Œã™ã‚‹å‰ã«ã€æ¬¡ã®äº‹é …ã‚’æº–å‚™ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ç°¡å˜ã«è¦ç´„ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

* Linuxã‚µãƒ¼ãƒ1å°
* ã‚¦ã‚§ãƒ–ãƒ–ãƒ©ã‚¦ã‚¶ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸPC 1å°

è©³ç´°ã¯æ¬¡ã®æ–‡æ›¸ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š[ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å‰ã®æº–å‚™äº‹é …](../prerequisites)

## ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

æ¬¡ã®æ–‡æ›¸ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š[ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡](../system-architecture-and-network-access-control)

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«éç¨‹

### setup.v2.shå®Ÿè¡Œ

QueryPieã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹Linuxã‚µãƒ¼ãƒã®shellã§ã€`setup.v2.sh`ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€å®Ÿè¡Œã—ã¾ã™ã€‚
setup.shãŒå®Ÿéš›ã«å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã¯å®Ÿè¡Œéç¨‹ã§ç¢ºèªã§ãã¾ã™ã€‚
```bash
$ # Download setup.v2.sh and execute it.
$ bash <(curl -s https://dl.querypie.com/setup.v2.sh)
```

ä»¥ä¸‹ã®ã‚ˆã†ã«`setup.v2.sh`ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜ã—ãŸå¾Œã€å®Ÿè¡Œã—ã¦ã‚‚ã‚ˆã„ã§ã™ã€‚
```bash
$ curl -s https://dl.querypie.com/setup.v2.sh -o setup.v2.sh
$ bash setup.v2.sh
```

`setup.v2.sh`ã¯è£½é€ å…ƒã§æ¨å¥¨ã™ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è‡ªå‹•çš„ã«é¸æŠã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ã“ã®æ–‡æ›¸ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š[è£½å“ãƒãƒ¼ã‚¸ãƒ§ãƒ³](../product-versions)

ç‰¹å®šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚
```bash
$ bash setup.v2.sh --install 10.3.4
$ bash setup.v2.sh --upgrade 11.0.1
$ bash setup.v2.sh --help
#### setup.v2.sh - QueryPie Installer 25.08.8, /usr/bin/bash 4.4.20(1)-release on Linux x86_64 ####
setup.v2.sh 25.08.8, the QueryPie installation script.
Usage: setup.v2.sh [options]
    or setup.v2.sh [options] --install <version>
    or setup.v2.sh [options] --install-container-engine
    or setup.v2.sh [options] --install-compose-package <version>
    or setup.v2.sh [options] --upgrade <version>
    or setup.v2.sh [options] --uninstall
    or setup.v2.sh [options] --help

FOR AWS AMI BUILD MAINTAINER:
    or setup.v2.sh [options] --install-partially-for-ami <version>
    or setup.v2.sh [options] --resume
    or setup.v2.sh [options] --verify-installation
    or setup.v2.sh [options] --verify-not-installed
    or setup.v2.sh [options] --populate-env <env-file>
    or setup.v2.sh [options] --reset-credential <env-file>

ENVIRONMENT VARIABLES:

  DOCKER_REGISTRY                Default: 'docker.io/querypie/'
    The Docker registry to pull images from.
    You may specify a private registry such as 'myregistry.example.com/querypie/'.
    Note that the trailing slash is required, if you set this variable.
    Actual image names will be like 'myregistry.example.com/querypie/querypie:11.1.1'.

OPTIONS:
  --yes               Assume "yes" to all prompts and run non-interactively.
  -V, --version       Show the version of this script.
  -x, --xtrace        Print commands and their arguments as they are executed.
  -h, --help          Show this help message.
$ 
```

### Podmanç’°å¢ƒã§QueryPieã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

`setup.v2.sh` `25.08.8`ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‹ã‚‰ã¯Podman + Docker Composeçµ„ã¿åˆã‚ã›ã®å®Ÿè¡Œç’°å¢ƒã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚

ä»¥ä¸‹ã®Linuxãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯Podman + Docker Composeçµ„ã¿åˆã‚ã›ã®å®Ÿè¡Œç’°å¢ƒã‚’æ¨å¥¨ã—ã¾ã™ã€‚

* Red Hat Enterprise Linux 8ã€9ã€10
* Rocky 8ã€9

è©³ç´°ãªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã¯ã“ã®æ–‡æ›¸ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š[Podmanã§Rootless Modeæ§‹æˆ](../prerequisites/configuring-rootless-mode-with-podman)

### setup.v2.shãŒè‡ªå‹•çš„ã«å®Ÿè¡Œã™ã‚‹ä½œæ¥­

`setup.v2.sh`ã¯æ¬¡ã®ä¸»è¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ã‚’è‡ªå‹•çš„ã«é€²è¡Œã—ã¾ã™ã€‚

1. `docker-compose.yml`ã€`.env`ãªã©Composeã®ãŸã‚ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
    * æ—¢å­˜ã®`compose-env`ã¨ã„ã†ç’°å¢ƒå¤‰æ•°è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®åå‰ãŒ`.env`ã«å¤‰ã‚ã‚Šã¾ã—ãŸã€‚`compose-env`ã¯è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆã®ãŸã‚ã®templateã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
2.  `.env`ã«ç’°å¢ƒå¤‰æ•°å€¤ã‚’è¨­å®š
    * å„ç’°å¢ƒå¤‰æ•°ã«é–¢ã™ã‚‹èª¬æ˜ã¯[ã‚³ãƒ³ãƒ†ãƒŠç’°å¢ƒå¤‰æ•°](../container-environment-variables)æ–‡æ›¸ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
3. docker imageãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
    * `docker.io/querypie/` registryã‹ã‚‰imageã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€Harbor loginéç¨‹ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚
4. mysqlã€redis containerå®Ÿè¡Œ
5. querypie-tools containerå®Ÿè¡Œã—ã€migrationå®Ÿè¡Œ
6. querypie-app containerå®Ÿè¡Œ
7. `./querypie/current`ã¨ã„ã†ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’ç”Ÿæˆã—ã¦ã€ç¾åœ¨å‹•ä½œä¸­ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡ã—ã¾ã™ã€‚

`setup.v2.sh`ãŒquerypie-app containerã‚’æ­£å¸¸ã«èµ·å‹•ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå®Ÿè¡ŒæˆåŠŸæ¡ˆå†…ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«é­é‡ã—ã¾ã™ã€‚
```
+ docker exec querypie-app-1 readyz
########################################################################
#                                                                      #
#     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    #
#    â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•    #
#    â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—      #
#    â–ˆâ–ˆâ•‘â–„â–„ â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—  â•šâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•      #
#    â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    #
#     â•šâ•â•â–€â–€â•â•  â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•   â•šâ•â•   â•šâ•â•     â•šâ•â•â•šâ•â•â•â•â•â•â•    #
#                                                                      #
########################################################################
.--------------------------------------------------------.
|  ğŸš€ QueryPie Server has been successfully started! ğŸš€  |
|  Timestamp in UTC: Mon Jul 28 17:04:31 UTC 2025        |
|  Timestamp in KST: Tue Jul 29 02:04:31 KST 2025        |
'--------------------------------------------------------'
+ popd
~
## Create a symbolic link 'current' pointing to 11.0.1
+ pushd ./querypie/
~/querypie ~
+ rm -f current
+ ln -s 11.0.1 current
+ popd
~
### Installation completed successfully
### Access QueryPie at http://172.31.11.201:8000 or https://172.31.11.201:8443 in your browser
### Determine the public IP address of your host machine if needed
[ec2-user@ip-172-31-11-201 ~]$ 
```

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†

ãŠç–²ã‚Œã•ã¾ã§ã—ãŸã€‚
ã“ã‚Œã§QueryPieãŒå‹•ä½œã™ã‚‹æ§˜å­ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

`setup.v2.sh`ã®å®Ÿè¡Œæœ€å¾Œã«è¡¨ç¤ºã•ã‚Œã‚‹`http://172.31.11.201:8000`ã®ã‚ˆã†ãªURLã«æ¥ç¶šã‚’è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚
ã“ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯Local PCã‹ã‚‰Linux Serverã«æ¥ç¶šã™ã‚‹ãŸã‚ã®IP Addressã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šæ§‹æˆã‚’å‚ç…§ã—ã¦ã€Firewallã€AWS Security Groupè¨­å®šãªã©ã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼š[ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡](../system-architecture-and-network-access-control)

### Licenseå…¥åŠ›

Licenseãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚¦ã‚§ãƒ–ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”»é¢ã§å…¥åŠ›ã§ãã¾ã™ã€‚

<figure data-layout="left" data-align="left">
<img src="/installation/installation/installation-guide-setupv2sh/image-20250718-063723.png" alt="Enter the license in PEM format." width="767" />
<figcaption>
Enter the license in PEM format.
</figcaption>
</figure>

## åŸºæœ¬è¨­å®šæ‰‹é †

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå®Œäº†ã—ãŸã‚‰ã€é‹ç”¨ç’°å¢ƒã«åˆã‚ã›ã¦åˆæœŸè¨­å®šã‚’é€²ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
è©³ç´°ãªè¨­å®šæ‰‹é †ã¯æ¬¡ã®æ–‡æ›¸ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š[ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã®åˆæœŸè¨­å®š](../post-installation-setup)


