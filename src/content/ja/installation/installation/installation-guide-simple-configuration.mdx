---
title: 'ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰ - ç°¡å˜ãªæ§‹æˆ'
---

import { Callout } from 'nextra/components'

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰ - ç°¡å˜ãªæ§‹æˆ


## ç´¹ä»‹

ã“ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰ã¯1ã¤ã®ã‚µãƒ¼ãƒã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã«QueryPie ACPã‚µãƒ¼ãƒã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ç°¡å˜ãªæ§‹æˆã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã‚’æ¡ˆå†…ã—ã¾ã™ã€‚
ç°¡å˜ãªæ§‹æˆã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‚‚ã€å¤§éƒ¨åˆ†ã®ã‚¯ã‚¨ãƒªãƒ‘ã‚¤æ©Ÿèƒ½ã‚’è©¦ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

ã—ã‹ã—ã€ã“ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹å¼ã¯å®Ÿéš›ã®é‹ç”¨ç’°å¢ƒã§ä½¿ç”¨ã™ã‚‹ã«ã¯é©ã—ã¦ã„ã¾ã›ã‚“ã€‚
å®Ÿéš›ã®é‹ç”¨ç’°å¢ƒã§ä½¿ç”¨ã™ã‚‹ã®ã«é©ã—ãŸã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã¯åˆ¥é€”æä¾›ã•ã‚Œã‚‹[QueryPie Installation Guide]ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

<Callout type="info">
QueryPie 10.3.0ä»¥é™ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å¯¾è±¡ã¨ã™ã‚‹PoCç”¨é€”ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰ã§ã™ã€‚
</Callout>

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å‰ã®æº–å‚™äº‹é …

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’é€²è¡Œã™ã‚‹å‰ã«ã€æ¬¡ã®äº‹é …ã‚’æº–å‚™ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ç°¡å˜ã«è¦ç´„ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

* Linuxã‚µãƒ¼ãƒ1å°
* ã‚¦ã‚§ãƒ–ãƒ–ãƒ©ã‚¦ã‚¶ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸPC 1å°

è©³ç´°ã¯æ¬¡ã®æ–‡æ›¸ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š[ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å‰ã®æº–å‚™äº‹é … - ç°¡å˜ãªæ§‹æˆ](../prerequisites)

## ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

æ¬¡ã®æ–‡æ›¸ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š[ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡](../system-architecture-and-network-access-control)

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«éç¨‹

### setup.shå®Ÿè¡Œ

QueryPieã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ç°¡å˜ã«å®Ÿè¡Œã§ãã‚‹`setup.sh`ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€å®Ÿè¡Œã—ã¾ã™ã€‚
setup.shãŒå®Ÿéš›ã«å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã¯å®Ÿè¡Œéç¨‹ã§ç¢ºèªã§ãã¾ã™ã€‚
ä»¥ä¸‹ã®ã€ŒManual steps replacing setup.shã€é …ç›®ã¯`setup.sh`ãŒå®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’ç§»ã—ãŸã‚‚ã®ã§ã™ã€‚

QueryPie Serviceã®ãŸã‚ã®dockerã€docker-composeã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€docker-compose.ymlãªã©è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

<Callout type="info">
ä»¥ä¸‹ã«æç¤ºã•ã‚ŒãŸQP_VERSIONã€DOWNLOAD_VERSIONã¯ä¾‹ã§ã™ã€‚
ã©ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‹ã€æŠ€è¡“ã‚µãƒãƒ¼ãƒˆæ‹…å½“è€…ã«ç¢ºèªã—ã¦ãã ã•ã„ã€‚
</Callout>
```bash
# Download and run ./setup.sh with required environment variables.
curl -L https://dl.querypie.com/releases/compose/setup.sh -o setup.sh
chmod +x setup.sh
export DOWNLOAD_VERSION=10.3.x
export QP_VERSION=10.3.0
./setup.sh

# Grant permission of docker group
sudo usermod -aG docker $USER

# Please logout and ssh again to run docker command.
```

dockerã‚’åˆã‚ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸå ´åˆã€ç¾åœ¨ã®shellãŒdocker groupã®æ¨©é™ã‚’ã¾ã æŒã£ã¦ã„ã¾ã›ã‚“ã€‚
logoutå¾Œã€å†åº¦sshæ¥ç¶šã—ã¦ãã ã•ã„ã€‚

<Callout type="important">
OSãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚„ç¨®é¡ã«ã‚ˆã£ã¦setup.shãŒæ­£å¸¸ã«å®Ÿè¡Œã•ã‚Œãªã„å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
</Callout>
<details>
<summary>Manual steps replacing setup.sh</summary>
```bash
# Install docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh ./get-docker.sh
sudo systemctl start docker
sudo usermod -aG docker $USER

# Install docker-compose
curl -SL https://dl.querypie.com/releases/bin/v2.29.7/docker-compose-linux-x86_64 -o docker-compose
chmod +x docker-compose
sudo install -m 755 docker-compose /usr/local/bin/

# Install docker-compose.yml and config files
# NOTE: Please use the actual version number instead of '10.3.0'.
mkdir -p querypie/10.3.0
cd querypie/10.3.0
curl -L https://dl.querypie.com/releases/compose/10.3.x/package.tar.gz -o package.tar.gz
tar zxvf package.tar.gz

# Install logrotate config for docker daemon
sudo cp logrotate /etc/logrotate.d/querypie

```
</details>

### Harbor Login

QueryPie Docker Imageã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹ã‚ˆã†ã«ã€Harbor Docker Registryã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã™ã€‚

<Callout type="info">
åˆå›ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚é¡§å®¢ç¤¾ãƒãƒ¼ãƒãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ç™ºè¡Œã—ã¦äº‹å‰ã«ä¼é”ã„ãŸã—ã¾ã™ã€‚
</Callout>
```bash
docker login harbor.chequer.io
Username:
Password:
```

ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹å ´åˆã€Harborã«æ­£å¸¸ã«ãƒ­ã‚°ã‚¤ãƒ³ã•ã‚ŒãŸã‚‚ã®ã§ã™ã€‚
```bash
WARNING! Your password will be stored unencrypted in /home/ubuntu/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credential-stores 

Login Succeeded
```

### compose-envè¨­å®š

`./setup.sh`ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€`querypie/<version>/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«`docker-compose.yml`ã€`compose-env`ãªã©è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«ç§»å‹•ã—ã¦ã€`compose-env`ã¨ã„ã†åå‰ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¾ã™ã€‚

å„ç’°å¢ƒå¤‰æ•°ã«é–¢ã™ã‚‹èª¬æ˜ã¯æ¬¡ã®æ–‡æ›¸ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š[ã‚³ãƒ³ãƒ†ãƒŠç’°å¢ƒå¤‰æ•°æ¡ˆå†…](../container-environment-variables)
```bash
# Version of QueryPie Docker Image to run: 10.3.0 or later.
VERSION=10.3.0

# Common
## Secret key for encrypting communication between QueryPie client agents and QueryPie over port 9000/tcp.
## Must be exactly 32 characters in length.
## Suggested: 32-char random string via `openssl rand -hex 16`
AGENT_SECRET=

## Secret key used to encrypt sensitive information, such as database connection strings and SSH private keys.
## This key can be any string but is immutable once set.
## Suggested: 16-char random string via `openssl rand -hex 8`
KEY_ENCRYPTION_KEY=

# DB
## Suggested: host.docker.internal
DB_HOST=
DB_PORT=3306
DB_CATALOG=querypie
LOG_DB_CATALOG=querypie_log
ENG_DB_CATALOG=querypie_snapshot
## Suggested: querypie
DB_USERNAME=
## Suggested: 16-char random string via `openssl rand -hex 8`
DB_PASSWORD=
DB_MAX_CONNECTION_SIZE=20
## If youâ€™re using AWS Aurora, use the software.amazon.jdbc.Driver instead of org.mariadb.jdbc.Driver for automatic failover handling.
DB_DRIVER_CLASS=org.mariadb.jdbc.Driver

# Redis
## REDIS_NODES should be specified as a â€œHost:Portâ€ combination.
## In CLUSTER MODE, when specifying multiple nodes, separate each address with a comma.
## Example: Host1:6379,Host2:6379,Host3:6379
## Suggested: host.docker.internal:6379
REDIS_NODES=
## Suggested: 16-char random string via `openssl rand -hex 8`
REDIS_PASSWORD=

DAC_SKIP_SQL_COMMAND_RULE_FILE=skip_command_config.json
```

### MySQL / Redisèµ·å‹•

Single machineæ§‹æˆã§ã¯ã€1ã¤ã®VMå†…ã«QueryPie MySQLã€QueryPie Redisã‚’Containeræ–¹å¼ã§å®Ÿè¡Œã—ã¾ã™ã€‚
æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§ã€MySQLã€Redisã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
åˆã‚ã¦å®Ÿè¡Œã™ã‚‹å ´åˆã€`compose-env`ãƒ•ã‚¡ã‚¤ãƒ«ã§å®šç¾©ã—ãŸUsernameã€Passwordã‚’é©ç”¨ã—ã¦ã€åŸºæœ¬ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ç”Ÿæˆã—ã¾ã™ã€‚
```
docker-compose --env-file compose-env --profile database up -d
```
```
docker ps

CONTAINER ID  IMAGE                                            ... NAMES
0b8d8b9b9486  harbor.chequer.io/querypie/mysql:8.0.39          ... querypie-mysql-1
6d96b9cdc95e  harbor.chequer.io/querypie/redis:7.4.2           ... querypie-redis-1
```

### Toolsèµ·å‹•

QueryPie Toolsã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«éç¨‹ã§ä½¿ç”¨ã•ã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
QueryPie Toolsã¯QueryPie MySQLã«Tableã€Procedureãªã©ã‚’ç”Ÿæˆã™ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚
MySQLã®Database Tableãªã©ã¯è£½å“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å¾“ã£ã¦ãã®å†…å®¹ãŒå¤‰ã‚ã‚Šã€Flywayã¨ã„ã†ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ„ãƒ¼ãƒ«ã‚’åˆ©ç”¨ã—ã¦ã€æ§‹æˆã‚’ç®¡ç†ã—ã¾ã™ã€‚
QueryPie Toolsã¯è£½å“ã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

QueryPie Toolsã¯TCP Port 8050ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘å…¥ã‚Œã‚‹APIã‚µãƒ¼ãƒæ–¹å¼ã§å‹•ä½œã—ã¾ã™ã€‚

#### Toolså®Ÿè¡Œ

æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã€QueryPie Toolsã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
ãã®å¾Œ`docker ps`ã‚³ãƒãƒ³ãƒ‰ã§ContainerãŒæ­£å¸¸ã«å®Ÿè¡Œä¸­ã‹ç¢ºèªã§ãã¾ã™ã€‚`docker logs -f querypie-tools-1`ã‚³ãƒãƒ³ãƒ‰ã§Containerã®ãƒ­ã‚°ã‚’ç¢ºèªã§ãã¾ã™ã€‚
```
docker-compose --env-file compose-env --profile tools up -d
```
```
docker ps

CONTAINER ID  IMAGE                                            ... NAMES
6e867d744acb  harbor.chequer.io/querypie/querypie-tools:10.3.0 ... querypie-tools-1
0b8d8b9b9486  harbor.chequer.io/querypie/mysql:8.0.39          ... querypie-mysql-1
6d96b9cdc95e  harbor.chequer.io/querypie/redis:7.4.2           ... querypie-redis-1
```

#### Migrationå®Ÿè¡Œ

QueryPieãŒè¦æ±‚ã™ã‚‹MySQL Tableã€Procedureãªã©ã‚’ç”Ÿæˆã™ã‚‹ä½œæ¥­ã‚’ã€Migrationã¨ã„ã„ã¾ã™ã€‚
æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã€Migrationã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
åˆå›ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®å ´åˆã€æ•°ç™¾ä»¶ã®DB Tableã‚’ç”Ÿæˆã™ã‚‹éç¨‹ã§ã€1ï½2åˆ†ç¨‹åº¦æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚
```
docker exec -it querypie-tools-1 /app/script/migrate.sh runall
```
```
[2025-05-20 07:43:15] QueryPie migration is started.
--------------------------------------------------------------------------------
[2025-05-20 07:43:15] QueryPie `V67.11__9.10.0.11_workflow_rule_migration.sql` is started.
[2025-05-20 07:43:18] QueryPie `V67.11__9.10.0.11_workflow_rule_migration.sql` is finished.

...
[2025-05-20 07:44:17] QueryPie Snapshot `V5.0__10.2.8.0_oven_diary_tables_alter_json_column_type.sql` is started.
[2025-05-20 07:44:17] QueryPie Snapshot `V5.0__10.2.8.0_oven_diary_tables_alter_json_column_type.sql` is finished.
[2025-05-20 07:44:17] QueryPie Snapshot migration is finished.
--------------------------------------------------------------------------------
```

#### Licenseå®Ÿè¡Œ

QueryPie Toolsã«licenseãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè¡Œã§ãã¾ã™ã€‚`license.crt`ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«åã¯ä¾‹ã§ã™ã€‚
æŠ€è¡“ã‚µãƒãƒ¼ãƒˆæ‹…å½“è€…ã‹ã‚‰å—ã‘å–ã£ãŸãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®åå‰ã‚’æŒ‡å®šã™ã‚Œã°ã‚ˆã„ã§ã™ã€‚
ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã¯x509å½¢å¼ã®è¨¼æ˜æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ã€ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚
```
curl -XPOST 127.0.0.1:8050/license/upload -F file=@license.crt
```
```
[License] Upload: Success
```

#### Toolsçµ‚äº†

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®ãŸã‚ã®ä¸­é–“éç¨‹ãŒå®Œäº†ã—ãŸãŸã‚ã€QueryPie Toolsã‚’çµ‚äº†ã—ã¾ã™ã€‚
```
docker-compose --env-file compose-env --profile tools down
```

### QueryPieèµ·å‹•

QueryPie Toolsã‚’åˆ©ç”¨ã—ã¦ã€MySQL Database Tableã‚’ç”Ÿæˆã—ã€Licenseã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ã€åŸºæœ¬çš„ãªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«éç¨‹ãŒã»ã¼å®Œäº†ã—ãŸã‚‚ã®ã§ã™ã€‚
ã“ã‚Œã§QueryPie Server Containerã‚’å®Ÿè¡Œã—ã¦ã€QueryPieã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚
æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã€QueryPie Server Containerã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
```
docker-compose --env-file compose-env --profile querypie up -d
```

ä¸€èˆ¬çš„ãªã‚µãƒ¼ãƒç’°å¢ƒã§ç´„1åˆ†50ç§’ï½2åˆ†10ç§’å¾Œã«QueryPie ContainerãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚
```
docker ps

CONTAINER ID  IMAGE                                            ... NAMES
69353ab980d8  harbor.chequer.io/querypie/querypie:10.3.0       ... querypie-app-1
0b8d8b9b9486  harbor.chequer.io/querypie/mysql:8.0.39          ... querypie-mysql-1
6d96b9cdc95e  harbor.chequer.io/querypie/redis:7.4.2           ... querypie-redis-1
```

QueryPie Containerã®ãƒ—ãƒ­ã‚»ã‚¹ãŒæ­£å¸¸ã«èµ·å‹•ã™ã‚‹ã¨ã€Container Logã§ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå®Ÿè¡ŒæˆåŠŸæ¡ˆå†…ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«é­é‡ã—ã¾ã™ã€‚
```
docker logs -f querypie-app-1

....
READYZ             | ########################################################################
READYZ             | #                                                                      #
READYZ             | #     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    #
READYZ             | #    â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•    #
READYZ             | #    â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—      #
READYZ             | #    â–ˆâ–ˆâ•‘â–„â–„ â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—  â•šâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•      #
READYZ             | #    â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    #
READYZ             | #     â•šâ•â•â–€â–€â•â•  â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•   â•šâ•â•   â•šâ•â•     â•šâ•â•â•šâ•â•â•â•â•â•â•    #
READYZ             | #                                                                      #
READYZ             | ########################################################################
READYZ             | .--------------------------------------------------------.
READYZ             | |  ğŸš€ QueryPie Server has been successfully started! ğŸš€  |
READYZ             | |  Timestamp in UTC: Sun Jan 26 15:00:56 UTC 2025        |
READYZ             | |  Timestamp in KST: Mon Jan 27 00:00:56 KST 2025        |
READYZ             | '--------------------------------------------------------'
....
```

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†

ãŠç–²ã‚Œã•ã¾ã§ã—ãŸã€‚
ã“ã‚Œã§QueryPieãŒå‹•ä½œã™ã‚‹æ§˜å­ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## åŸºæœ¬è¨­å®šæ‰‹é †

é‹ç”¨ç’°å¢ƒã«å¾“ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä»¥é™å¿…é ˆçš„ã«å®Ÿè¡ŒãŒå¿…è¦ãªè¨­å®šã‚’æ¡ˆå†…ã—ã¾ã™ã€‚

### å…±é€šè¨­å®š

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç›´å¾ŒQueryPieä½¿ç”¨æ™‚ã«å¿…è¦ãªå…±é€šæ‰‹é †ã§ã™ã€‚

#### QueryPie Web Base URLè¨­å®š

> è¨­å®šçµŒè·¯ï¼šAdmin Page â†’ General
Web Consoleã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®QueryPieã®URLã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã™ã€‚<br/>ï¼ˆä¾‹ï¼š`https://querypie.customer.com`ï¼‰<br/>ã“ã®URLã¯QueryPieã®Base URLã¨ã‚‚å‘¼ã°ã‚Œã¾ã™ã€‚

ã“ã®URLã¯`/`ã§çµ‚ã‚ã£ã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚`https://querypie.customer.com/`ã®ã‚ˆã†ã«URLã®æœ€å¾Œã«`/`ã‚’ä»˜ã‘ãªã„ã‚ˆã†æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

ã“ã®URLã¯ä»¥ä¸‹ã®ç”¨é€”ã§ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

* SSO Integrationã®èªè¨¼éç¨‹ã§ã€callbackã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
* Web Consoleã§User Agentã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãƒªãƒ³ã‚¯ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
* ãã®ä»–è©³ç´°ãªç”¨é€”ã¯ã€[https://chequer.atlassian.net/wiki/spaces/QCP/pages/876937310](https://chequer.atlassian.net/wiki/spaces/QCP/pages/876937310)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

<figure data-layout="center" data-align="center">
![image-20250520-081112.png](/installation/installation/installation-guide-simple-configuration/image-20250520-081112.png)
</figure>

### è£½å“åˆ¥è¨­å®š

#### DAC/SAC: Proxyæ¥ç¶šã‚¢ãƒ‰ãƒ¬ã‚¹è¨­å®š

QueryPie Databaseã«æ¥ç¶šã—ã¦ã€DAC/SACã®Proxyæ¥ç¶šã®ãŸã‚ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ç™»éŒ²ã—ã¾ã™ã€‚

<Callout type="info">
QueryPie Web Consoleã§QueryPie Databaseã«æ¥ç¶šã™ã‚‹ã«ã¯ã€DBæ¥ç¶šè¨­å®šãŒå¿…è¦ã§ã™ï¼š[DB Connections](../../administrator-manual/databases/connection-management/db-connections)

Databaseæ¥ç¶šè¨­å®šéç¨‹ã§QueryPie MySQLã®Hostnameã€Usernameã€PasswordãŒå¿…è¦ã§ã™ã€‚

* Hostname: `host.docker.internal`
* Username: `querypie`ï¼ˆåŸºæœ¬è¨­å®šã®å ´åˆï¼‰
* Password: ï¼ˆQueryPieã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®compose-envãƒ•ã‚¡ã‚¤ãƒ«ã§DB_PASSWORDã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ï¼‰

compose-envã«è¨­å®šã•ã‚ŒãŸå€¤ã®ã†ã¡DB_PASSWORDã€REDIS_PASSWORDã€KEY_ENCRYPTION_KEYãªã©ã¯å®‰å…¨ã«ä¿ç®¡ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ä»–ã®äººã«ã“ã®å€¤ã‚’éœ²å‡ºã—ãªã„ã‚ˆã†æ³¨æ„ã—ã¦ãã ã•ã„ã€‚
</Callout>

ä»¥ä¸‹`<customer-proxy-address>`éƒ¨åˆ†ã‚’é¡§å®¢ç¤¾ã®Proxyæ¥ç¶šIPã¾ãŸã¯ãƒ‰ãƒ¡ã‚¤ãƒ³ã«ç½®ãæ›ãˆã¦ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

<Callout type="important">
è©²å½“ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯`http` `https`ã®ã‚ˆã†ãªSchemeã‚’ä»˜ã‘ã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚
</Callout>
```
UPDATE querypie.proxies SET host = '<customer-proxy-address>' WHERE id = 1;
```

ã‚¯ã‚¨ãƒªå®Ÿè¡Œã«ã‚¨ãƒ©ãƒ¼ãªãæ­£å¸¸ã«å®Ÿè¡Œã•ã‚ŒãŸã“ã¨ãŒç¢ºèªã•ã‚Œã‚Œã°ã€ä»¥ä¸‹ã®ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã—ã¦ç™»éŒ²ã•ã‚ŒãŸã‹ç¢ºèªã—ã¾ã™ã€‚
```
SELECT * FROM querypie.proxies;
```

Proxyæ¥ç¶šã®ãŸã‚ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’QueryPie Databaseã«ç™»éŒ²ã—ãŸå¾Œã€Server Containerã‚’å†èµ·å‹•ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
User Agentã‹ã‚‰ãƒ­ã‚°ã‚¤ãƒ³ã‚’è©¦ã¿ã‚‹ã¨ã€ã‚¦ã‚§ãƒ–ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é€šã˜ã¦èªè¨¼ã‚’é€²è¡Œã—ãŸå¾Œã€User Agentã‚’ä½¿ç”¨ã§ãã‚‹çŠ¶æ…‹ã«ãªã‚Šã¾ã™ã€‚

<figure data-layout="center" data-align="center">
![image-20250520-082706.png](/installation/installation/installation-guide-simple-configuration/image-20250520-082706.png)
</figure>

#### KAC: Proxyæ¥ç¶šã‚¢ãƒ‰ãƒ¬ã‚¹è¨­å®š

QueryPie Databaseã«æ¥ç¶šã—ã¦ã€KACã®Proxyæ¥ç¶šã®ãŸã‚ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ç™»éŒ²ã—ã¾ã™ã€‚

ä»¥ä¸‹`<customer-proxy-fqdn>`éƒ¨åˆ†ã‚’é¡§å®¢ç¤¾ã®Proxyæ¥ç¶šIPã¾ãŸã¯ãƒ‰ãƒ¡ã‚¤ãƒ³ã«ç½®ãæ›ãˆã¦ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

ç‰¹è¨˜äº‹é …ã¨ã—ã¦DAC/SACè¨­å®šã¨ã¯ç•°ãªã‚Š`http` `https`ã®ã‚ˆã†ãªSchemeã‚’è‡ªç”±ã«å…¥åŠ›å¯èƒ½ã§ã™ã€‚

<Callout type="important">
è¨­å®šå¾Œã€å†…éƒ¨çš„ã«ç™»éŒ²ã—ãŸã‚¢ãƒ‰ãƒ¬ã‚¹ã«åˆã†TLSè¨¼æ˜æ›¸ç™ºè¡Œã®ãŸã‚ã«QueryPie Containerå†èµ·å‹•ãŒå¿…è¦ã§ã™ã€‚
</Callout>
```
UPDATE querypie.k_proxy_setting SET host = 'https://<customer-proxy-fqdn>';
```

<figure data-layout="center" data-align="center">
![image-20250520-084243.png](/installation/installation/installation-guide-simple-configuration/image-20250520-084243.png)
</figure>

#### WAC: Proxyæ¥ç¶šã‚¢ãƒ‰ãƒ¬ã‚¹è¨­å®š

> è¨­å®šçµŒè·¯ï¼šAdmin Page â†’ Web Apps â†’ Web App Configurations
WACã®Proxyæ¥ç¶šã‚¢ãƒ‰ãƒ¬ã‚¹è¨­å®šã¯Web Consoleã§å®Ÿè¡Œå¯èƒ½ã§ã™ã€‚

è©³ç´°ãªè¨­å®šæ‰‹é †ã¯æ¬¡ã®æ–‡æ›¸ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š[Web App Configurationsã§WACåˆæœŸè¨­å®š](../../administrator-manual/web-apps/wac-quickstart/initial-wac-setup-in-web-app-configurations)

<Callout type="important">
è¨­å®šå¾Œã€å†…éƒ¨çš„ã«ç™»éŒ²ã—ãŸã‚¢ãƒ‰ãƒ¬ã‚¹ã«åˆã†TLSè¨¼æ˜æ›¸ç™ºè¡Œã®ãŸã‚ã«QueryPie Containerå†èµ·å‹•ãŒå¿…è¦ã§ã™ã€‚
</Callout>


