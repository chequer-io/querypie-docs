---
title: 'システム構成図概要'
---

import { Callout } from 'nextra/components'

# システム構成図概要

### Overview

QueryPieは、クラウドおよびオンプレミス環境で動作するWebアプリケーションアーキテクチャを備えています。

QueryPieは、Linux VM上でDockerコンテナ形式で動作するのが一般的であり、TLS証明書で保護されたWebアプリケーションとして運用することを推奨します。
お客様がクラウド環境にQueryPieをインストールして運用する場合、ロードバランサーおよびTLS証明書を適用して構成することを推奨します。
接続設定やユーザー情報など、QueryPieの運用に必要なリソースはMySQLデータベースに保存されます。
高速な応答時間のために、Redisを一時ストレージとして活用します。

QueryPieのバイナリパッケージはDockerイメージとして作成されており、OSおよびDockerデーモンが最新バージョンの場合、Azure、AWS、GCPのLinux VMまたは物理的なLinuxサーバーにデプロイできるように準備されています。
また、ネイティブでKubernetesをサポートしていますが、主にKubernetes DevOpsチームがあるお客様を対象に推奨されます。
試用評価用のバイナリパッケージは、お客様に提供されるバージョンと同じです。
製品の機能は、供給者がリモートで提供しインストールするインストール済みライセンスによって管理されます。
評価ライセンスは、一般的に2週間から4週間の使用期間を提供します。

### 試用評価のための簡単な構成

<figure data-layout="center" data-align="center">
![Simple System Configuration for Evaluation](/querypie-overview/system-architecture-overview/screenshot-20240801-115045.png)
<figcaption>
Simple System Configuration for Evaluation
</figcaption>
</figure>

上記のシステム構造は、QueryPie製品を試用評価するために構成する簡単な構成の事例です。
利用者はWebブラウザでQueryPieに接続することになり、QueryPieはApplication Load Balancerに接続された1つのLinux VMにインストールされて動作します。
Linux VM内には、QueryPieアプリケーションがDockerコンテナ方式で稼働し、これ以外にQueryPieが使用するMySQLデータベース、RedisキャッシュがDockerコンテナ方式で稼働します。

QueryPieは、https://querypie-poc.customer.com/のようなTLS証明書が適用されたWebサービスURLを持つことになり、これを構成するためにTLS証明書とともにApplication Load Balancerを設定することを推奨します。


### 試用評価構成のための事前準備事項

テストおよび評価目的でQueryPieをインストールするために必要な準備事項は以下のとおりです。

1. 製品にアクセスするためのFully Qualified Domain Name (FQDN)
    * 希望するドメインを自由に選択できます。例）querypie-poc.customer.com
2. 上記FQDNのためのロードバランサー(LB)とTLS証明書
    * QueryPie技術サポート担当者がTLS証明書ファイルに直接アクセスする必要はありません。
    * ただし、QueryPieはTLSが適用されたロードバランサー(LB)が必要です。
    * AWSの場合、[Application Load Balancer](https://docs.aws.amazon.com/elasticloadbalancing/latest/application/introduction.html)がこれに該当します。
    * Azureの場合、[Application Gateway](https://learn.microsoft.com/en-us/azure/application-gateway/overview)がこれに該当します。
    * GCPの場合、[Application Load Balancer](https://cloud.google.com/load-balancing/docs/application-load-balancer)がこれに該当します。
3. QueryPieを実行するLinux VM
    * 評価目的では、2つのvCPUと8GiBメモリを使用することを推奨します。
    * ロードバランサーを適用することは必須ですが、2つ以上のVMインスタンスを構成する必要はありません。
    * QueryPieを単一VMにインストールしても、製品の機能を効果的にテストできます。
4. お客様のLinux VM環境へのリモートアクセスを一時的に許可してください。
    * ロードバランサーおよびTLS設定のための一時的なAzure、AWS、GCPアカウントを提供できます。SSH公開鍵を通じてアクセスできるLinux VMインスタンスを構成し、SSH公開鍵(.pemファイル)を提供できます。


### 実使用のためのシステム構成の要約

<figure data-layout="center" data-align="center">
![Summary of System Architecture for Real Use](/querypie-overview/system-architecture-overview/screenshot-20240801-115343.png)
<figcaption>
Summary of System Architecture for Real Use
</figcaption>
</figure>

<Callout type="info">
上記の構成は、詳細なシステムアーキテクチャではなく、利用者の理解を助けるために要約された構成図です。
</Callout>

上記の構成は、実際のQueryPie製品を使用する場合に適用されるシステム構成の主要要素を要約して表現した事例です。
利用者はWebブラウザでQueryPieに接続して使用できます。
それだけでなく、DataGrip、MySQL Workbench、iTerm、Puttyなど、利用者PCで実行するアプリケーションからDB、Systemにアクセスするために、QueryPie AgentをPCにインストールして使用できます。

クラウド環境に構成されたQueryPieサーバーは、Webアプリケーションとして動作するために二重化された構成を備えており、クラウドで提供されるManaged Service方式のMySQL、Redisを使用することを推奨します。
PCにインストールされたQueryPie Agentは、TCPベースの独自プロトコルを利用してQueryPieサーバーに接続し、これのためにNetwork Load Balancerを構成することを推奨します。
