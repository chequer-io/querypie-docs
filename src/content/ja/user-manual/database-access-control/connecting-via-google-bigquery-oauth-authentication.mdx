---
title: 'Google BigQuery OAuth認証を通じて接続する'
confluenceUrl: 'https://querypie.atlassian.net/wiki/spaces/QM/pages/820609510/Google+BigQuery+OAuth'
---

import { Callout } from 'nextra/components'

# Google BigQuery OAuth認証を通じて接続する

### Overview

QueryPie管理者がBigQueryコネクション認証方式をOAuth 2.0に設定した場合、接続時に自分のGoogleアカウントで接続できます。

### Googleアカウントでログイン

1. QueryPieユーザーページのDatabase項目下のコネクションリストでBigQueryコネクションを選択します。<br/>(管理者からアクセスが許可されなければコネクションリストで見ることができません.)<br/>
  <figure data-layout="center" data-align="center">
  <img src="/user-manual/database-access-control/connecting-via-google-bigquery-oauth-authentication/image-20250226-020846.png" alt="ユーザーページBigQueryコネクションのReset Tokenボタン" width="760" />
  <figcaption>
  ユーザーページDatabaseのコネクションリストで見えるBigQueryコネクション
  </figcaption>
  </figure>
2. `Connect`ボタンを押すと表示されるポップアップでログインに使用するGoogleアカウントを選択します。
  <figure data-layout="center" data-align="center">
  <img src="/user-manual/database-access-control/connecting-via-google-bigquery-oauth-authentication/image-20250123-110105.png" alt="image-20250123-110105.png" width="388" />
  </figure>
3. サービスにログインすることについての案内画面で「続行」を選択します。<br/>
  <figure data-layout="center" data-align="center">
  <img src="/user-manual/database-access-control/connecting-via-google-bigquery-oauth-authentication/image-20250123-110419.png" alt="サービスにログイン" width="390" />
  <figcaption>
  サービスにログイン
  </figcaption>
  </figure>
4. Googleアカウントへのアクセスを許可します。<br/>
  <figure data-layout="center" data-align="center">
  <img src="/user-manual/database-access-control/connecting-via-google-bigquery-oauth-authentication/image-20250123-111820.png" alt="image-20250123-111820.png" width="392" />
  </figure>
5. しばらく待つと接続が完了します。

### Refresh token再設定

<Callout type="info">
OAuth認証方式はユーザーがログインする時にaccess tokenとrefresh tokenを発行します。
その後access tokenの期限が満了するとrefresh tokenを使用してaccess tokenを再発行します。
refresh tokenは各クライアントに保存されます。
refresh tokenにも期限がある場合があり、様々な原因によってクライアントに保存されたrefresh tokenが有効でない状況が発生する場合があります。
この時、クライアントに保存されているrefresh tokenを削除して再発行を受ける必要があります。
</Callout>

ユーザーページの「Database」にアクセス可能なOAuth認証設定されたBigQueryコネクションを選択すると、以下の図のように`Reset Token`ボタンがあります。
このボタンをクリックするとクライアントに保存された既存トークンが削除され、OAuth認証の最初（Googleアカウントのサービスにログイン）から再び進行できます。

<figure data-layout="center" data-align="center">
<img src="/user-manual/database-access-control/connecting-via-google-bigquery-oauth-authentication/image-20250226-020846.png" alt="ユーザーページBigQueryコネクションのReset Tokenボタン" width="760" />
<figcaption>
ユーザーページBigQueryコネクションのReset Tokenボタン
</figcaption>
</figure>

<Callout type="info">
`Reset Token`ボタンは保存されたトークンを削除するだけで認証段階を進行しません。
OAuth認証段階は`Connect`ボタンを押して開始されます。
</Callout>
