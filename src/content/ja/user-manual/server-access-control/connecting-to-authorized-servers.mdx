---
title: '権限のあるサーバーに接続する'
confluenceUrl: 'https://querypie.atlassian.net/wiki/spaces/QM/pages/544381383'
---

import { Callout } from 'nextra/components'

# 権限のあるサーバーに接続する


### Overview

ユーザーは権限のあるサーバーのリストをサーバー、サーバーグループ別またはCloud Provider別にソートして一目で確認できます。
接続するサーバーを選択後、ユーザーはオペレーティングシステムに関係なくウェブブラウザを通じて提供されるウェブターミナルとウェブSFTPを通じてコマンドを実行し、作業を実行できます。

### Role選択

<figure data-layout="center" data-align="center">
<img src="/user-manual/server-access-control/connecting-to-authorized-servers/image-20240723-155143.png" alt="QueryPie Web &gt; System Access Control &gt; Servers &gt; Select a Role" width="760" />
<figcaption>
QueryPie Web &gt; System Access Control &gt; Servers &gt; Select a Role
</figcaption>
</figure>

1. Serversメニューに初回接続時に表示されるRole選択画面で接続のために使用するRoleを選択します。
    1. Roleによってサーバーアクセス権限が異なり、付与されたRoleがない場合、Default Roleが自動的に選択されます。
    2. Default RoleはWorkflowを通じて受けた権限や管理者がRoleなしで直接付与したアクセス権限を意味します。

### サーバーに接続

<figure data-layout="center" data-align="center">
<img src="/user-manual/server-access-control/connecting-to-authorized-servers/Screenshot-2025-08-25-at-4.46.51-PM.png" alt="QueryPie Web &gt; System Access Control &gt; Servers" width="760" />
<figcaption>
QueryPie Web &gt; System Access Control &gt; Servers
</figcaption>
</figure>

1. Role選択後は左側のパネルで現在のユーザーがアクセス可能なサーバーリストを確認できます
    1. Sort by Server Group : サーバーリストはサーバーグループが優先ソートされ、下部に個別サーバーがソートされます。もしソート方式をサーバーグループなしでサーバーのみ表示したい場合は左上にある`Sort by Server Group`ボタンをOff状態に変更すれば 됩니다。
    2. Time-limited items only : 時間単位で権限を付与されたサーバーのみリストで表示します。
    3. Search by Host : サーバーリストの検索基準が既存サーバー名からHost（IPアドレス）に変更されます。同時にサーバーリストの表記方式もHostに切り替わって表示されます。トグルが無効化された状態ではサーバー名でのみ検索できます。
2. サーバーリストでサーバーを選択すると右側ページでサーバーおよびアカウント情報を確認できます。
    1.  **Server OS** : 該当サーバーのOSが表示されます
    2.  **Host** : 該当サーバーのホストが表示されます。
    3.  **Account** : 権限のあるアカウントリストです。アカウント後の括弧内にはサーバーおよびアカウントが属するサーバーグループが表示されます。
    4.  **Custom Account** : AccountでカテゴリがQueryPie - Custom Accountのアカウントを選択した時に表示されます。事前に登録されたアカウント以外に接続しようとするサーバーのアカウントを入力します。該当アカウントのパスワードはPasswordフィールドに入力すれば 됩니다。
    5.  **View Detailed Policy Application**  : 選択したアカウントに適用された政策を表示します。
        1.  **Access Time**  : 接続可能時間を表示します。
        2.  **Weekday Access Allowed**  : 接続可能曜日を表示します。
        3.  **Restrict Commands (SSH)**  : SSH接続時遮断コマンドを表示します。
        4.  **Restrict Functions (SFTP)**  : SFTP接続時遮断機能を表示します。
    6.  **Password** （またはSSH Key） : 選択したアカウントの認証方式がPasswordの場合、Passwordを入力できるフィールドが表示されます。もし自動ログイン設定がされている場合、Password項目は表示されず、管理者が設定したパスワードまたはSSH Keyでログインします。
    7.  **Status** : 選択したアカウントの状態が表示されます。
    8.  **Protocol** : SSH、SFTPまたはRDPを選択して接続できます。
3. 下部の`Connect`ボタンをクリックしてサーバーに接続します。

<Callout type="info">
**Q. 接続に失敗したというエラーが表示されます。なぜそうなるのですか？**
A. 権限の状態が変更されたり接続が許可されていない時間帯、曜日に接続を試行した場合失敗する可能性があります。
また、管理者のサーバー情報設定によって接続が不可能な場合があるため、詳細内容は管理者にお問い合わせください。
</Callout>

<Callout type="info">
**Q. RDPを通じたWindows Server接続はどのようにしますか？**

A. QueryPieではQueryPie Agent (User Agent / Multi-Agent)を通じてのみWindows Serverに接続が可能です。
接続方法は以下の通りです。

QueryPie Agent (User Agent / Multi-Agent)インストール後、権限を付与されたWindows Serverを右クリック、`Open Connection with`メニューをクリック後、PCにインストールされたRDP Clientをクリックして接続します。

* Windows PCではPCに基本インストールされたMSTSCプログラムをサポートします。
* macOSはRDP接続のために[Windows App](https://apps.apple.com/us/app/windows-app/id1295203466?mt=12)をダウンロードする必要があります。

11.3.0からMulti-AgentでCustom Accountを選択してアカウントのパスワードを手動で入力して接続できるよう変更されました。<br/>

<figure data-layout="center" data-align="center">
<img src="/user-manual/server-access-control/connecting-to-authorized-servers/image-20251010-095324.png" alt="image-20251010-095324.png" width="500" />
</figure>
</Callout>

<Callout type="info">
**Q. VNCを通じたmacOS接続はどのようにしますか？**

A. ユーザーのPCがmacOSの時、QueryPie User Agentを通じてmacOSに接続が可能です。
接続方法は以下の通りです。

QueryPie User Agentインストール後、権限を付与されたmacOSを右クリック、`Open Connection with`メニューをクリック後、macOSにインストールされた画面共有.appをクリックして接続します。
接続時、macOSのアカウント情報を直接入力する必要があります。

* Windows PCではmacOS接続をサポートしません。
* VNCはmacOSサーバー対象でのみ接続が可能です。
</Callout>
