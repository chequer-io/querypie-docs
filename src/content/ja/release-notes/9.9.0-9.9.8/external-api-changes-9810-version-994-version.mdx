---
title: 'External API変更事項（9.8.10バージョン > 9.9.4バージョン）'
confluenceUrl: 'https://querypie.atlassian.net/wiki/spaces/QM/pages/544375685/External+API+9.8.10+9.9.4'
---

# External API変更事項（9.8.10バージョン > 9.9.4バージョン）

______

## API Docs JSON file

:paperclip: [9810_external.json](9810_external.json)
:paperclip: [994_external.json](994_external.json)


______

## 1. Authentication

* API Key HTTP Header nameが変更されました

|                             |  **変更前**            |  **変更後**     |
| --------------------------- | -------------------- | ------------- |
|  **Header Parameter name**  | X-QueryPie-Api-Token | Authorization |


______

## 2. Alert API

#### 変更/改善事項

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**API(9.8.10)**
</th>
<th>
**変更点**
</th>
</tr>
<tr>
<th>
**(GET) List**
</th>
<td>
* 各Alertの  **すべての情報** を返却 <br/>→ 各Alertの  **簡単な情報** を返却するように変更されました。
* 各Alert Type別にAlertの詳細情報を返却する  **Detail API追加** されました。
</td>
</tr>
<tr>
<th>
**(POST) Create**
</th>
<td>
*  **1つのAPI** で全てのTypeのAlertを生成可能 <br/>→ 各Alert Type別に  **生成APIが分離** しました。
* 既存Create API削除されました。
</td>
</tr>
<tr>
<th>
**(PUT) Update**
</th>
<td>
*  **1つのAPI** で全てのTypeのAlertを修正可能 <br/>→ 各Alert Type別に  **修正APIを分離** しました。
* 既存Update API削除されました。
</td>
</tr>
<tr>
<th>
**(Delete) Delete**
</th>
<td>
* 変更点なし。
</td>
</tr>
</tbody>
</table>

#### [新規](POST) Create, (PUT) Update, (GET) Detail API

* 詳細なリクエスト内容はDocs参照

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**Alert Type(9.8.10基準)**
</th>
<th>
**Docs位置(9.9.4)**
</th>
</tr>
<tr>
<td>
`SQL_EXECUTION`
</td>
<td>
[SQL Execution]<br/>`/api/external/alerts/sql-execution`
</td>
</tr>
<tr>
<td>
`SQL_EXECUTION_PREVENTED`
</td>
<td>
[Prevented SQL Execution]<br/>`/api/external/alerts/prevented-sql-execution`
</td>
</tr>
<tr>
<td>
`DATABASE_AUTHENTICATION_FAILED`
</td>
<td>
[DB Connection Attempt]<br/>`/api/external/alerts/db-connection-attempt`
</td>
</tr>
<tr>
<td>
`SENSITIVE_DATA_BY_POLICY`
</td>
<td>
[Sensitive Data Access]<br/>`api/external/alerts/sensitive-data-access`
* policy
</td>
</tr>
<tr>
<td>
`SENSITIVE_DATA_BY_LEVEL`
</td>
<td>
[Sensitive Data Access]<br/>`api/external/alerts/sensitive-data-access`
* level
</td>
</tr>
<tr>
<td>
`EXCEL_EXPORT`
</td>
<td>
[Data Export]<br/>`api/external/alerts/data-export`
</td>
</tr>
<tr>
<td>
`APPROVAL_REQUESTED`
</td>
<td>
[Workflow New Request]<br/>`/api/external/alerts/workflow-new-request`
</td>
</tr>
<tr>
<td>

</td>
<td>
[Unusual Login Attempt] 新規追加されました<br/>`/api/external/alerts/unusual-login-attempt`
</td>
</tr>
</tbody>
</table>

#### (GET) List

`/api/external/notifications`

##### Request

* 変更点なし

##### Response

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**変更前**
</th>
<th>
**変更後**
</th>
</tr>
<tr>
<td>
```json
{
  "list": [
    {
      "condition": {...},
      "description": "",
      "lastAt": "2019-08-24T14:15:22Z",
      "lastStatus": "UNDEFINED",
      "notification": {...},
      "policy": {...},
      "template": "{{userName}} executed {{expRows}} rows.",
      "uuid": "a5ac2279-b715-4819-a00d-daba81739057"
    },
    ...
  ],
  "page": {...}
}
```
</td>
<td>
```json
{
  "list": [
    {
      "alertType": "SQL Execution",
      "lastAt": "2019-08-24T14:15:22Z",
      "lastStatus": "UNDEFINED",
      "name": "string",
      "template": "{{userName}} executed {{expRows}} rows.",
      "uuid": "a5ac2279-b715-4819-a00d-daba81739057"
    },
    ...
  ],
  "page": {...}
}
```
</td>
</tr>
</tbody>
</table>



______

## 3. Approval Rule API

#### (GET) List

`/api/external/approval-rules`

##### Request

* Query Parameter
*  **RequestType** が `SQL`, `ACCESS` → `SQL`, `EXPORT`, `ACCESS` に `EXPORT` **が追加** されました。

##### Response

* 変更点なし



______

## 4. Audit Log API

#### (GET) List of Approval

`/api/external/audit-logs`

##### Request

* Query Parameter

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**変更前**
</th>
<th>
**変更後**
</th>
</tr>
<tr>
<td>
* pageNumber
* pageSize
* actionType
* clusterGroupId
* clusterId
* startDate
* endDate
* databaseType
* sqlFullText
</td>
<td>
*  **cursor** 
*  **count** 
* actionType
* clusterGroupId
* clusterId
* startDate
* endDate
*  **databaseType** 
* sqlFullText
</td>
</tr>
</tbody>
</table>

* cursorはResponseの  **nextCursor** を  **そのまま** 使用すればよいです。最初の呼び出しの場合は空にしておきます。
    * /api/docsに記載されている内容は  **誤った内容** で、以降のバージョンで修正予定です。
*  **count** は既存pageSizeと同一で、  **max** 値は  **100** です。
*  **databaseType** に `Redis` が  **追加** されました。

##### Response

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**変更前**
</th>
<th>
**変更後**
</th>
</tr>
<tr>
<td>
```json
{
  "list": [
    {
      …
      "execMillis": 200,
      "execResult": false,
      "executedAt": "2019-08-24T14:15:22Z",
      …
    }
  ],
  "page": {
    "currentPage": 0,
    "pageSize": 0,
    "totalElements": 0,
    "totalPages": 0
  }
}
```

</td>
<td>
```json
{
  "hasNext": true,
  "list": [
    {
      …
      "execMillis": 200,
      "execResult": false, (Deprecated)
      "executedAt": "2019-08-24T14:15:22Z",
      …
    }
  ],
  "nextCursor": "2019-08-24T16:15:22Z"
}
```
</td>
</tr>
</tbody>
</table>

* hasNextフィールドが  **追加** されました。  **Response以降に次のデータがあるか** を表します。
*  **execResult** が **Deprecated** されました。以降のバージョンで削除されます。
*  **page** フィールドが  **消えて**   **nextCursor** が  **追加** されました。
    * RequestのstartDateとendDateの間で現在のResponseのlistのうち  **最も最後の要素のexecutedAt** を意味します。
    * Requestのcursorに該当値を入れると  **該当時間から続けて** データを取得します。 (startDate, endDateは変更しなくてもよいです。)
    * /api/docsに記載されている内容は  **誤った内容** で、以降のバージョンで修正予定です。

#### <br/>(GET) Detail

`/api/external/audit-logs/{id}`

##### Request

* 変更点なし

##### Response

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**変更前**
</th>
<th>
**変更後**
</th>
</tr>
<tr>
<td>
```json
{
      …
      "execMillis": 200,
      "execResult": false,
      "executedAt": "2019-08-24T14:15:22Z",
      …
}
```

</td>
<td>
```json
{
      …
      "execMillis": 200,
      "execResult": false, (Deprecated)
      "executedAt": "2019-08-24T14:15:22Z",
      …
}
```
</td>
</tr>
</tbody>
</table>

*  **execResult** が **Deprecated** されました。以降のバージョンで削除されます。


#### (GET) Detail

`/api/external/audit-logs/{uuid}`

##### Request

* 変更点なし

##### Response

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**変更前**
</th>
<th>
**変更後**
</th>
</tr>
<tr>
<td>
```json
{
      …
      "execMillis": 200,
      "execResult": false,
      "executedAt": "2019-08-24T14:15:22Z",
      …
}
```

</td>
<td>
```json
{
      …
      "execMillis": 200,
      "execResult": false, (Deprecated)
      "executedAt": "2019-08-24T14:15:22Z",
      …
}
```

</td>
</tr>
</tbody>
</table>

*  **execResult** が **Deprecated** されました。以降のバージョンで削除されます。



______

## 5. Authentication History API

#### (GET) List of Authentication

`/api/external/connection-auth-logs`

##### Request

* Query Parameter

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**変更前**
</th>
<th>
**変更後**
</th>
</tr>
<tr>
<td>
* pageNumber
* pageSize
* actionType
* clusterGroupId
* clusterId
* startDate
* endDate
* databaseType
* sqlFullText
</td>
<td>
* pageNumber
* pageSize
*  **actionType** 
* clusterGroupId
* clusterId
* startDate
* endDate
*  **databaseType** 
* sqlFullText
</td>
</tr>
</tbody>
</table>

*  **actionType** から `LOGIN`, `LOGOUT`, `LOCKED`, `EXPIRED`, `LOCKED_MANUALLY`, `UNLOCK` が  **削除** されました。
    *  `CONNECT`, `DISCONNECT` のみ使用します。
*  **databaseType** に `Redis`が  **追加** されました。

##### Response

* 変更点なし



______

## 6. User Access History API

#### (GET) List of User Access History

`/api/external/system-auth-logs`

##### Request & Response

*  **actionType** から `CONNECT`, `DISCONNECT`が  **削除** されました。
    *  `LOGIN`, `LOGOUT`, `LOCKED`, `EXPIRED`, `LOCKED_MANUALLY`, `UNLOCK` のみ使用します。



______

## 7. Cloud Provider API

#### (GET) List of Cloud Provider

`/api/external/cloud-providers`

##### Request

* 変更点なし

##### Response

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**変更前**
</th>
<th>
**変更後**
</th>
</tr>
<tr>
<td>
```json
{
  "list": [
    {
      …
      "subscriptionId": "string",
      "targetArn": "string",
      …
    }
  ],
  "page": {
    …
  }
}
```
</td>
<td>
```json
{
  "list": [
    {
      …
      "subscriptionId": "string",
      "synchronizableDatabaseTypes": [],
      "targetArn": "string",
      …
    }
  ],
  "page": {
     …
  }
}
```
</td>
</tr>
</tbody>
</table>

*  **synchronizableDatabaseTypes** が  **追加** されました。
    *  **同期したいデータベースのタイプ**  (ベンダー) を出力するフィールドです。
    * `AURORA_MY_SQL`, `AURORA_POSTGRESQL`, `MY_SQL`, `POSTGRESQL`, `MARIA_DB`, `ORACLE`, `SQL_SERVER`, `DYNAMO_DB`, `DOCUMENT_DB`, `REDSHIFT`, `ATHENA`


#### (POST) Create Cloud Provider

`/api/external/cloud-providers`

##### Request

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**変更前**
</th>
<th>
**変更後**
</th>
</tr>
<tr>
<td>
```json
{
      …
      "subscriptionId": "string",
      "targetArn": "string",
      …
}
```

</td>
<td>
```json
{
      …
      "subscriptionId": "string",
      "synchronizableDatabaseTypes": [],
      "targetArn": "string",
      …
}
```
</td>
</tr>
</tbody>
</table>

*  **synchronizableDatabaseTypes** が  **追加** されました。
    *  **同期したいデータベースのタイプ**  (ベンダー) を入力するフィールドです。
    * `AURORA_MY_SQL`, `AURORA_POSTGRESQL`, `MY_SQL`, `POSTGRESQL`, `MARIA_DB`, `ORACLE`, `SQL_SERVER`, `DYNAMO_DB`, `DOCUMENT_DB`, `REDSHIFT`, `ATHENA`

##### Response

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**変更前**
</th>
<th>
**変更後**
</th>
</tr>
<tr>
<td>
```json
{
      …
      "subscriptionId": "string",
      "targetArn": "string",
      …
 }
```
</td>
<td>
```json
{
      …
      "subscriptionId": "string",
      "synchronizableDatabaseTypes": [],
      "targetArn": "string",
      …
}
```

</td>
</tr>
</tbody>
</table>

*  **synchronizableDatabaseTypes** が  **追加** されました。
    *  **同期したいデータベースのタイプ**  (ベンダー) を出力するフィールドです。
    * `AURORA_MY_SQL`, `AURORA_POSTGRESQL`, `MY_SQL`, `POSTGRESQL`, `MARIA_DB`, `ORACLE`, `SQL_SERVER`, `DYNAMO_DB`, `DOCUMENT_DB`, `REDSHIFT`, `ATHENA`<br/>

#### (PUT) Update Cloud Provider

`/api/external/cloud-providers/{cloudProviderUuid}`

##### Request

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**変更前**
</th>
<th>
**変更後**
</th>
</tr>
<tr>
<td>
```json
{
  "cronExpression": "0 0 6 * * ?",
  "name": "AWS",
  "proxyAuthType": "QUERYPIE",
  "proxyEnabled": true,
  "replicationMode": "MANUAL"
}
```

</td>
<td>
```json
{
  "cronExpression": "0 0 6 * * ?",
  "name": "AWS",
  "proxyAuthType": "QUERYPIE",
  "proxyEnabled": true,
  "replicationMode": "MANUAL",
  "synchronizableDatabaseTypes": [
    "AURORA_MY_SQL"
  ]
}
```

</td>
</tr>
</tbody>
</table>

*  **synchronizableDatabaseTypes** が  **追加** されました。
    *  **同期したいデータベースのタイプ**  (ベンダー) を入力するフィールドです。
    * `AURORA_MY_SQL`, `AURORA_POSTGRESQL`, `MY_SQL`, `POSTGRESQL`, `MARIA_DB`, `ORACLE`, `SQL_SERVER`, `DYNAMO_DB`, `DOCUMENT_DB`, `REDSHIFT`, `ATHENA`

##### Response

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**変更前**
</th>
<th>
**変更後**
</th>
</tr>
<tr>
<td>
```json
{
      …
      "subscriptionId": "string",
      "targetArn": "string",
      …
}
```

</td>
<td>
```json
{
      …
      "subscriptionId": "string",
      "synchronizableDatabaseTypes": [],
      "targetArn": "string",
      …
}
```
</td>
</tr>
</tbody>
</table>

*  **synchronizableDatabaseTypes** が  **追加** されました。
    *  **同期したいデータベースのタイプ**  (ベンダー) を出力するフィールドです。
    * `AURORA_MY_SQL`, `AURORA_POSTGRESQL`, `MY_SQL`, `POSTGRESQL`, `MARIA_DB`, `ORACLE`, `SQL_SERVER`, `DYNAMO_DB`, `DOCUMENT_DB`, `REDSHIFT`, `ATHENA`



______

## 8. Cluster Role API

#### (GET) List of Role

`/api/external/roles`

##### Request

* 変更点なし

##### Response

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**変更前**
</th>
<th>
**変更後**
</th>
</tr>
<tr>
<td>
```json
{
  "list": [
    {
      …
      "privilegeTypes": "SELECT",
      …
    },
    …
  ],
  "page": { … }
}
```
</td>
<td>
```
{
  "list": [
    {
      …
      "privilegeTypes": "SELECT",
      "privilegeVendor": "SQL",
      …
    },
    …
  ],
  "page": { … }
}
```
</td>
</tr>
</tbody>
</table>

*  **privilegeVendor** が  **追加** されました。
    * `SQL`, `REDIS`

#### (POST) Create Role

`/api/external/roles`

##### Request & Response

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**変更前**
</th>
<th>
**変更後**
</th>
</tr>
<tr>
<td>
```json
{
  …
  "privilegeTypes": "ALL",
  …
}
```
</td>
<td>
```json
{
  …
  "privilegeTypes": "ALL",
  "privilegeVendor": "SQL",
  …
}
```
</td>
</tr>
</tbody>
</table>

*  **privilegeVendor** が  **追加** されました。
    * `SQL`, `REDIS`

#### (PUT) Update Role

`/api/external/roles/{roleUuid}`

##### Request & Response

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**変更前**
</th>
<th>
**変更後**
</th>
</tr>
<tr>
<td>
```json
{
  …
  "privilegeTypes": "ALL",
  …
}
```
</td>
<td>
```json
{
  …
  "privilegeTypes": "ALL",
  "privilegeVendor": "SQL",
  …
}
```
</td>
</tr>
</tbody>
</table>

*  **privilegeVendor** が  **追加** されました。
    * `SQL`, `REDIS`



______

## 9. Connection API

#### (GET) List of Cluster Group

`/api/external/connections`

##### Request

* 変更点なし

##### Response

<table>
<colgroup>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>

</th>
<th>
**変更前**
</th>
<th>
**変更後**
</th>
</tr>
<tr>
<th>
**Request**
</th>
<td>
<p>-</p>
</td>
<td>
なし
</td>
</tr>
<tr>
<th>
**Response**
</th>
<td>
```json
{
  "list": [
    {
      …
      "clusters": [
          …
      ],
      "connectionOwners": [
       …
      ],
      "databaseType": "MySQL",
      "databaseVersion": "5.7.10",
      "dbUserInfos": [
        {
          "dbUserType": "string",
          "dbUsername": "string"
        }
      ],
      "deleted": false,
      …
      "schemaName": "test_db",
      "useMultipleAccount": true,
      "useProxy": true,
      …
    }
  ],
  "page": {
    …
  }
}
```

</td>
<td>
```json
{
  "list": [
    {
      …
      "clusters": [
        …
      ],
      "connectionAccount": {
        "kerberosProtocols": {
          "admin": {
            "principal": "string",
            "realm": "string",
            "serviceName": "string"
          },
          "common": {
            "principal": "string",
            "realm": "string",
            "serviceName": "string"
          }
        },
        "type": "UIDPWD",
        "useMultipleAccount": false,
        "usernamePasswords": {
          "admin": {
            "username": "string"
          },
          "common": {
            "username": "string"
          },
          "proxy": {
            "username": "string"
          }
        }
      },
      "connectionOwners": [
        …
      ],
      "databaseType": "MySQL",
      "databaseVersion": "5.7.10",
      "deleted": false,
      …
      "schemaName": "test_db",
      "useProxy": true,
      …
    }
  ],
  "page": {
    …
  }
}
```

</td>
</tr>
</tbody>
</table>

*  **dbUserInfo** が  **削除** されました。  **userMultipleAccount** が  **削除** されました。
    * 該当フィールドの内容はconnectionAccountを通じて伝達されます。<br/>
*  **connectionAccount** が  **追加** されました。
    * 接続の  **account**   **情報** を伝達するフィールドです。
    *  **type** はaccountの  **タイプ** を意味します。
        * `NOAUTH` `SASL_KERBEROS` `SASL_PLAIN_UID` `UIDPWD` `SASL_PLAIN_UIDPWD_SSL` `NOAUTH_SSL` `DELEGATION_TOKEN` `O_AUTH_CLIENT_CREDENTIALS`
    *  **useMultipleAccount** は  **マルチアカウント** を使用するかについての  **boolean** 値です。
    *  **KerberosProtocols** は  **Kerberosアカウント** 情報を伝達するフィールドです。
        * Kerberosアカウントは  **proxy**   **アカウント** を  **サポートしません。** 
    *  **usernamePasswords** は  **usernamePassword**   **アカウント** 情報を伝達するフィールドです。


#### (POST) Create Cluster Group

`/api/external/connections`

##### Request

<table>
<colgroup>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>

</th>
<th>
**変更前**
</th>
<th>
**変更後**
</th>
</tr>
<tr>
<th>
**Request**
</th>
<td>
<p>-</p>
</td>
<td>
なし
</td>
</tr>
<tr>
<th>
**Response**
</th>
<td>
```json
{
      "clusters": [
          …
      ],
      "connectionOwners": [
       …
      ],
      "databaseType": "MySQL",
      "databaseVersion": "5.7.10",
      "dbUserInfos": [
        {
          "dbUserType": "string",
          "dbUsername": "string"
        }
      ],
      "deleted": false,
      …
}
```

</td>
<td>
```json
{
      …
      "clusters": [
        …
      ],
      "connectionAccount": {
        "kerberosProtocols": {
          "admin": {
            "principal": "string",
            "realm": "string",
            "serviceName": "string"
          },
          "common": {
            "principal": "string",
            "realm": "string",
            "serviceName": "string"
          }
        },
        "type": "UIDPWD",
        "useMultipleAccount": false,
        "usernamePasswords": {
          "admin": {
            "username": "string"
          },
          "common": {
            "username": "string"
          },
          "proxy": {
            "username": "string"
          }
        }
      },
      "connectionOwners": [
        …
      ],
      "databaseType": "MySQL",
      "databaseVersion": "5.7.10",
      "deleted": false,
      …
}
```

</td>
</tr>
</tbody>
</table>

*  **dbUserInfo** が  **削除** されました。  **userMultipleAccount** が  **削除** されました。 
    * 該当フィールドの内容はconnectionAccountを通じて伝達されます。<br/>
*  **connectionAccount** が  **追加** されました。
    * 接続の  **account**   **情報** を伝達するフィールドです。
    *  **type** はaccountの  **タイプ** を意味します。
        * `NOAUTH` `SASL_KERBEROS` `SASL_PLAIN_UID` `UIDPWD` `SASL_PLAIN_UIDPWD_SSL` `NOAUTH_SSL` `DELEGATION_TOKEN` `O_AUTH_CLIENT_CREDENTIALS`
    *  **useMultipleAccount** は  **マルチアカウント** を使用するかについての  **boolean** 値です。
    *  **KerberosProtocols** は  **Kerberosアカウント** 情報を伝達するフィールドです。
        * Kerberosアカウントは  **proxy**   **アカウント** を  **サポートしません。** 
    *  **usernamePasswords** は  **usernamePassword**   **アカウント** 情報を伝達するフィールドです。

##### Response

<table>
<colgroup>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>

</th>
<th>
**変更前**
</th>
<th>
**変更後**
</th>
</tr>
<tr>
<th>
**Request**
</th>
<td>
<p>-</p>
</td>
<td>
なし
</td>
</tr>
<tr>
<th>
**Response**
</th>
<td>
```json
{
      …
      "clusters": [
          …
      ],
      "connectionOwners": [
       …
      ],
      "databaseType": "MySQL",
      "databaseVersion": "5.7.10",
      "dbUserInfos": [
        {
          "dbUserType": "string",
          "dbUsername": "string"
        }
      ],
      "deleted": false,
      …
      "schemaName": "test_db",
      "useMultipleAccount": true,
      "useProxy": true,
      …
}
```

</td>
<td>
```json
{
      …
      "clusters": [
        …
      ],
      "connectionAccount": {
        "kerberosProtocols": {
          "admin": {
            "principal": "string",
            "realm": "string",
            "serviceName": "string"
          },
          "common": {
            "principal": "string",
            "realm": "string",
            "serviceName": "string"
          }
        },
        "type": "UIDPWD",
        "useMultipleAccount": false,
        "usernamePasswords": {
          "admin": {
            "username": "string"
          },
          "common": {
            "username": "string"
          },
          "proxy": {
            "username": "string"
          }
        }
      },
      "connectionOwners": [
        …
      ],
      "databaseType": "MySQL",
      "databaseVersion": "5.7.10",
      "deleted": false,
      …
      "schemaName": "test_db",
      "useProxy": true,
      …
}
```

</td>
</tr>
</tbody>
</table>

*  **dbUserInfo** が  **削除** されました。  **userMultipleAccount** が  **削除** されました。 
    * 該当フィールドの内容はconnectionAccountを通じて伝達されます。<br/>
*  **connectionAccount** が  **追加** されました。
    * 接続の  **account**   **情報** を伝達するフィールドです。
    *  **type** はaccountの  **タイプ** を意味します。
        * `NOAUTH` `SASL_KERBEROS` `SASL_PLAIN_UID` `UIDPWD` `SASL_PLAIN_UIDPWD_SSL` `NOAUTH_SSL` `DELEGATION_TOKEN` `O_AUTH_CLIENT_CREDENTIALS`
    *  **useMultipleAccount** は  **マルチアカウント** を使用するかについての  **boolean** 値です。
    *  **KerberosProtocols** は  **Kerberosアカウント** 情報を伝達するフィールドです。
        * Kerberosアカウントは  **proxy**   **アカウント** を  **サポートしません。** 
    *  **usernamePasswords** は  **usernamePassword**   **アカウント** 情報を伝達するフィールドです。

#### <br/>(PATCH) Update Cluster Group

`/api/external/connections/{uuid}`

##### Request

<table>
<colgroup>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>

</th>
<th>
**変更前**
</th>
<th>
**変更後**
</th>
</tr>
<tr>
<th>
**Request**
</th>
<td>
<p>-</p>
</td>
<td>
なし
</td>
</tr>
<tr>
<th>
**Response**
</th>
<td>
```json
{
      "clusters": [
          …
      ],
      "connectionOwners": [
       …
      ],
      "databaseType": "MySQL",
      "databaseVersion": "5.7.10",
      "dbUserInfos": [
        {
          "dbUserType": "string",
          "dbUsername": "string"
        }
      ],
      "deleted": false,
      …
}
```

</td>
<td>
```json
{
      …
      "clusters": [
        …
      ],
      "connectionAccount": {
        "kerberosProtocols": {
          "admin": {
            "principal": "string",
            "realm": "string",
            "serviceName": "string"
          },
          "common": {
            "principal": "string",
            "realm": "string",
            "serviceName": "string"
          }
        },
        "type": "UIDPWD",
        "useMultipleAccount": false,
        "usernamePasswords": {
          "admin": {
            "username": "string"
          },
          "common": {
            "username": "string"
          },
          "proxy": {
            "username": "string"
          }
        }
      },
      "connectionOwners": [
        …
      ],
      "databaseType": "MySQL",
      "databaseVersion": "5.7.10",
      "deleted": false,
      …
}
```
</td>
</tr>
</tbody>
</table>

*  **dbUserInfo** が  **削除** されました。  **userMultipleAccount** が  **削除** されました。 
    * 該当フィールドの内容はconnectionAccountを通じて伝達されます。<br/>
*  **connectionAccount** が  **追加** されました。
    * 接続の  **account**   **情報** を伝達するフィールドです。
    *  **type** はaccountの  **タイプ** を意味します。
        * `NOAUTH` `SASL_KERBEROS` `SASL_PLAIN_UID` `UIDPWD` `SASL_PLAIN_UIDPWD_SSL` `NOAUTH_SSL` `DELEGATION_TOKEN` `O_AUTH_CLIENT_CREDENTIALS`
    *  **useMultipleAccount** は  **マルチアカウント** を使用するかについての  **boolean** 値です。
    *  **KerberosProtocols** は  **Kerberosアカウント** 情報を伝達するフィールドです。
        * Kerberosアカウントは  **proxy**   **アカウント** を  **サポートしません。** 
    *  **usernamePasswords** は  **usernamePassword**   **アカウント** 情報を伝達するフィールドです。

##### Response

<table>
<colgroup>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>

</th>
<th>
**変更前**
</th>
<th>
**変更後**
</th>
</tr>
<tr>
<th>
**Request**
</th>
<td>
<p>-</p>
</td>
<td>
なし
</td>
</tr>
<tr>
<th>
**Response**
</th>
<td>
```json
{
      …
      "clusters": [
          …
      ],
      "connectionOwners": [
       …
      ],
      "databaseType": "MySQL",
      "databaseVersion": "5.7.10",
      "dbUserInfos": [
        {
          "dbUserType": "string",
          "dbUsername": "string"
        }
      ],
      "deleted": false,
      …
      "schemaName": "test_db",
      "useMultipleAccount": true,
      "useProxy": true,
      …
}
```

</td>
<td>
```json
{
      …
      "clusters": [
        …
      ],
      "connectionAccount": {
        "kerberosProtocols": {
          "admin": {
            "principal": "string",
            "realm": "string",
            "serviceName": "string"
          },
          "common": {
            "principal": "string",
            "realm": "string",
            "serviceName": "string"
          }
        },
        "type": "UIDPWD",
        "useMultipleAccount": false,
        "usernamePasswords": {
          "admin": {
            "username": "string"
          },
          "common": {
            "username": "string"
          },
          "proxy": {
            "username": "string"
          }
        }
      },
      "connectionOwners": [
        …
      ],
      "databaseType": "MySQL",
      "databaseVersion": "5.7.10",
      "deleted": false,
      …
      "schemaName": "test_db",
      "useProxy": true,
      …
}
```

</td>
</tr>
</tbody>
</table>

*  **dbUserInfo** が  **削除** されました。  **userMultipleAccount** が  **削除** されました。 
    * 該当フィールドの内容はconnectionAccountを通じて伝達されます。<br/>
*  **connectionAccount** が  **追加** されました。
    * 接続の  **account**   **情報** を伝達するフィールドです。
    *  **type** はaccountの  **タイプ** を意味します。
        * `NOAUTH` `SASL_KERBEROS` `SASL_PLAIN_UID` `UIDPWD` `SASL_PLAIN_UIDPWD_SSL` `NOAUTH_SSL` `DELEGATION_TOKEN` `O_AUTH_CLIENT_CREDENTIALS`
    *  **useMultipleAccount** は  **マルチアカウント** を使用するかについての  **boolean** 値です。
    *  **KerberosProtocols** は  **Kerberosアカウント** 情報を伝達するフィールドです。
        * Kerberosアカウントは  **proxy**   **アカウント** を  **サポートしません。** 
    *  **usernamePasswords** は  **usernamePassword**   **アカウント** 情報を伝達するフィールドです。



______

## 10. Notification Channels API

#### (GET) List of Notification channel

`/api/external/notification-channels`

##### Request

* Query Parameterフィールド追加

<table>
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr>
<th>
**変更前**
</th>
<th>
**変更後**
</th>
</tr>
<tr>
<td>
* …
</td>
<td>
* dataFlowRequest. **filterKey** 
* dataFlowRequest. **filterValue** 
* dataFlowRequest. **sortKey** 
* dataFlowRequest. **sortType** 
* …
</td>
</tr>
</tbody>
</table>

* dataflowRequest. **filterKey** は  **フィルターキー** を入れます。. ex) "Title"
* dataflowRequest. **filterValue** は  **フィルター値 (検索語)** を入れます。 ex) "channelName123"
* dataflowRequest. **sortKey** は  **sort** する  **カラム名** を入れます。 ex ) "createdAt"
* dataflowRequest. **sortType** は  **sort** を  **降順** にするか、  **昇順** にするかを入力します。 ex) "ASC", "DESC"




