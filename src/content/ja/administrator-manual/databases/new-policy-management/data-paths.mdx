---
title: 'Data Paths'
---

import { Callout } from 'nextra/components'

# Data Paths

### Overview

Data Pathsメニューではテーブルとカラムにタグを割り当て、管理できます。
このように設定されたタグはデータ分類およびポリシー適用に活用されます。

### 主要特徴

*  **タギング適用対象** : テーブルとカラムレベルでタグ適用が可能です。
*  **適用制限** : データベース、スキーマレベルにはタグサポートがされません。
* テーブルアクセス制御: タグが割り当てられたテーブルのみアクセス可能にWhite List方式で権限を付与できます。 
*  **データ分類** : タグを通じてデータを目的と特性に従って分類できます。
*  **アクセス制御連携** : 割り当てられたタグを基にアクセス制御ポリシーを設定できます。


### テーブルにタグ割り当て

テーブルタギングはData Pathsメニューで管理でき、タグを通じてテーブルを体系的に分類し、管理できます。

<figure data-layout="center" data-align="center">
<img src="/administrator-manual/databases/new-policy-management/data-paths/image-20250307-121743.png" alt="image-20250307-121743.png" width="760" />
</figure>

1. 左側サイドバーで  **Policy Management**  セクション下の  **Data Paths** をクリックします。
2. 基本的に  **Tables**  タブが選択されています。
3. 右上の  **Add Table**  ボタンをクリックします。
4. ポップアップウィンドウで以下の情報を入力します:
    1.  **Connection** : ドロップダウンでデータベース接続を選択します。
    2.  **Database Name** : ドロップダウンでデータベース名を選択します。
    3.  **Table Name** : タグを割り当てるテーブルを選択します。 
5. すべての情報を入力した後  **OK**  ボタンをクリックしてテーブルを追加します。

<figure data-layout="center" data-align="center">
<img src="/administrator-manual/databases/new-policy-management/data-paths/image-20250307-122237.png" alt="image-20250307-122237.png" width="760" />
</figure>

1. テーブルが追加されると一覧に表示され、詳細ページで**「Add Tags」**  ボタンをクリックして新しいタグを追加できます。
2. タグはKey:Value形態で追加できます。 
3. ページ上部に選択したテーブルの基本情報が表示されます。 
    1. Connection選択時、該当コネクションの詳細ページに移動します。
    2. Column Checkクリック時、右側にテーブルカラム一覧が表示されます。 

<Callout type="important">
テーブル詳細画面ではテーブルに対するタグのみ管理できます。
カラムタグはカラム詳細画面で管理します。
</Callout>


### カラムにタグ割り当て

カラムタギングもData Pathsメニューで管理できます。
タグを通じてカラムを体系的に分類でき、マスキングなどのポリシーを効果的に一括適用できます。

<figure data-layout="center" data-align="center">
<img src="/administrator-manual/databases/new-policy-management/data-paths/image-20250307-124339.png" alt="image-20250307-124339.png" width="760" />
</figure>

1.  **Data Paths**  メニューの上部タブで  **Columns**  タブを選択します。
2. 右上の  **Add Column**  ボタンをクリックします。
3. ポップアップウィンドウで以下の情報を入力します:
    1.  **Connection** : ドロップダウンでデータベース接続を選択します。
    2.  **Database Name** : ドロップダウンでデータベース名を選択します。
    3.  **Table Name** : タグを割り当てるテーブルを選択します。 
    4.  **Column Name** : タグを割り当てるカラム名を選択します。
4. すべての情報を入力した後  **OK**  ボタンをクリックしてカラムを追加します。

<figure data-layout="center" data-align="center">
<img src="/administrator-manual/databases/new-policy-management/data-paths/image-20250307-124802.png" alt="image-20250307-124802.png" width="760" />
</figure>

1. カラムが追加されると一覧に表示され、詳細ページで**「Add Tags」**  ボタンをクリックして新しいタグを追加できます。
2. タグはKey:Value形態で追加できます。 
3. 詳細ページ上部に選択したカラムの基本情報が表示されます。 
    1. Connection選択時、該当コネクションの詳細ページに移動します。
    2. Columnクリック時、テーブル詳細ページに移動します。 

<Callout type="important">
**重要** : 参照するテーブルがData Pathsにまだ追加されていない状態でカラムを追加すると、該当テーブルが自動でData Pathsに一緒に追加されます。
したがって、別途テーブルをまず追加する必要がなく、カラム追加過程で必要なテーブルが自動で生成されます。
</Callout>


### テーブルとカラムの関係 - 自動テーブル生成機能

QueryPieはユーザー利便性を高めるためにカラムを追加する時、以下のような自動化機能を提供します:

1.  **テーブル自動生成** : カラムを追加する時、参照するテーブルがData Pathsに登録されていない場合、該当テーブルが自動でData Pathsに追加されます。
2.  **単一プロセス** : この機能により、ユーザーはテーブルをまず追加し、カラムを追加する2段階を経ずに、カラム追加過程で一度に処理できます。
3.  **一貫性維持** : 自動生成されたテーブルと追加されたカラム間の関係が自動で設定され、データ構造の一貫性が維持されます。


### タグベースでテーブルアクセス権限付与

Data Pathsメニューで設定したタグを基にテーブルアクセス権限を付与でき、whitelist方式で動作します。
つまり、特定タグが付与されたテーブルのみアクセスを許可し、残りのテーブルにはアクセスを制限する方式です。
この機能を通じて細密なデータアクセス制御を実装できます。

権限付与プロセスは大きく2段階で構成されます:

1. ユーザーにデータベースアクセス権限付与（Grant Privilege）
2. 付与された権限内でタグベースアクセス制御設定（Access Type）

<figure data-layout="center" data-align="center">
<img src="/administrator-manual/databases/new-policy-management/data-paths/image-20250307-125727.png" alt="image-20250307-125727.png" width="760" />
</figure>

1.  **Access Control**  メニューでアクセス権限を設定するユーザーを選択し  **Grant Permission**  で権限を付与します。 
2. 付与された権限一覧をクリックすると  **Privilege Details**  画面が表示されます。
3.  **Access Type**  セクションで  **Tag-based Table Access**  オプションを選択します。 
    1. 基本値（Default）は  **All Table Access**  オプションに設定されています。このオプションはすべてのテーブルにアクセス権限を付与します。
    2.  **Tag-based Table Access**  オプションを選択すると特定タグを持つテーブルのみアクセスを許可するwhitelist方式に変更されます。

### 権限適用結果

タグベーステーブルアクセス権限が設定されると:

1. ユーザーは設定されたタグが割り当てられたテーブルのみアクセスできます。
2. 該当タグがないテーブルにはアクセスが制限されます。

### 使用事例

タグベーステーブルアクセス権限は以下のような状況に有用です:

1.  **部署別データアクセス管理** : 各部署に関連するテーブルに特定タグを割り当て、該当部署ユーザーにそのタグを持つテーブルのみアクセスするよう設定できます。
2.  **プロジェクト別アクセス制御** : プロジェクト関連テーブルにプロジェクトタグを割り当て、プロジェクト参加者にのみ該当タグを持つテーブルにアクセス権限を付与できます。
3.  **データ機密度ベースアクセス制御** : データ機密度に従ってテーブルにタグを割り当て、適切な権限を持つユーザーにのみアクセスを許可できます。

### 注意事項

1. タグベースアクセス制御はwhitelist方式で動作するため、設定されたタグがないテーブルにはアクセスが不可能です。
2. 複数タグを追加する場合、該当タグ中一つでも持つテーブルにアクセスできます。
3. タグ設定はData Pathsメニューで管理されるため、アクセス制御設定前にテーブルに適切なタグが割り当てられている必要があります。
4. アクセス権限変更事項は保存後即座に適用されます。
